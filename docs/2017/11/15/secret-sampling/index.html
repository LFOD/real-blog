
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
<title>Live Free or Dichotomize - Secret Sampling 🎅🤶</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Live Free or Dichotomize">
<meta name="generator" content="Hugo 0.27.1" />

  



<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">


    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">








<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<link rel="stylesheet" href="../../../../css/tuftesque.css">
<style>
body {
  
    background-color: #fffff8;
  
}
</style>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92165973-1', 'auto');
  ga('send', 'pageview');
</script>


</head>

<body>
<div id="layout" class="pure-g">
<article class="pure-u-1">
<header class="brand">
  <h1>
    <a href="../../../../">
      <span id = "blog_logo">
         <img src="../../../../images/logo.png" alt="Blog Logo" style="height: 40px; width:40px">
      </span>
      
    </a>
  </h1>
</header>

<section>
  <h1 class="content-title">
  
  <a href="../../../../2017/11/15/secret-sampling/">Secret Sampling 🎅🤶</a>
  
  </h1>
  
  
  
  <span class="content-meta">
    
  
  
  
  <i class="fa fa-user">&nbsp;</i><span class="author">
    &nbsp;Sarah Lotspeich and Lucy D&#39;Agostino McGowan</span> <br>
    
  
  
  
  <i class="fa fa-calendar"></i>
    &nbsp;Nov 15, 2017
  
  
  
  &nbsp;<i class="fa fa-clock-o"></i>
    &nbsp;2 min read
  
  
  
  <br>
    <i class="fa fa-tags"> </i>
    
    <a  href="../../../../categories/rstats">rstats</a>
    
    <a  href="../../../../categories/holiday-cheer">holiday cheer</a>
    
    
    </span>
    
    
    </section>


<section><p>’Tis the season for white elephant / גמד וענק / Yankee swap / secret santa-ing! There are various rules for this, for our version:</p>
<p>🏷 each participant receives the name of someone else to purchase a gift for<br />
🎁 gifts are exchanged at a party<br />
🤔 the receiver is tasked with guessing who the gift-giver was!</p>
<p>We thought it’d be particularly fun to do it #rstats style.</p>
<div id="assigning-partners" class="section level2">
<h2>Assigning partners</h2>
<p>We had our interested classmates sign up on a <a href="https://docs.google.com/forms/u/0/">Google Form</a>,<label for="tufte-mn-" class="margin-toggle">⊕</label><input type="checkbox" id="tufte-mn-" class="margin-toggle"><span class="marginnote"><img src="../../../../images/2017-11-14/google-form.png" /></span> resulting in a Google Sheet with each participant’s <code>name</code>, <code>email</code>, and <code>interests</code>.</p>
<pre class="r"><code>library(&quot;googlesheets&quot;)
library(&quot;dplyr&quot;)</code></pre>
<pre class="r"><code>df &lt;- gs_url(&quot;https://docs.google.com/spreadsheets/d/1NHbsjZVhvIxzuivXWQvDBst0oMN7ZcCjCbI8XJeXxJI/edit#gid=860103774&quot;) %&gt;%
  gs_read()</code></pre>
<p>We began by making a tibble that has <code>name</code> in the first column and assigned a random <code>partner</code> in the second.</p>
<pre class="r"><code>set.seed(525)
dat &lt;- tibble(
  name = df$name,
  partner = sample(df$name)
)</code></pre>
<p><em>“But what if someone was assigned to be their own partner!”</em> you may ask. <label for="tufte-mn-" class="margin-toggle">⊕</label><input type="checkbox" id="tufte-mn-" class="margin-toggle"><span class="marginnote"><img src="https://media.giphy.com/media/23WStXFJFKN44/giphy.gif" /></span> Have no fear! A <code>while</code> loop is here! We allow a <code>while</code> loop to iterate until every individual is assigned a partner (who isn’t them!).</p>
<pre class="r"><code>while (any(dat$name == dat$partner)) {
  dat &lt;- tibble(
    name = df$name,
    partner = sample(df$name)
  )
}</code></pre>
<p>We then do a join to pull the emails and interests back in.</p>
<pre class="r"><code>df_name &lt;- names[ , c(&quot;name&quot;, &quot;email&quot;)]
df_partner &lt;- names[ , c(&quot;name&quot;, &quot;interests&quot;)]
dat &lt;- dat %&gt;%
  left_join(df_name, c(&quot;name&quot; = &quot;name&quot;)) %&gt;%
  left_join(df_partner, c(&quot;partner&quot; = &quot;name&quot;))</code></pre>
</div>
<div id="sending-the-email" class="section level2">
<h2>Sending the email</h2>
<p><a href="https://twitter.com/_inundata">Karthik</a> and I had a blast at the <a href="https://ropensci.org">rOpenSci</a> unconf creating the 🐴 <a href="https://github.com/ropenscilabs/ponyexpress">ponyexpress package</a> - what a delightful chance to use it! We didn’t want the secret to be spoiled (i.e. we didn’t want to know who would be buying us gifts!), so we wrote a script to send an email to our classmates.</p>
<pre class="r"><code>## devtools::install_github(&quot;ropenscilabs/ponyexpress&quot;)
library(&quot;ponyexpress&quot;)</code></pre>
<p><label for="tufte-mn-" class="margin-toggle">⊕</label><input type="checkbox" id="tufte-mn-" class="margin-toggle"><span class="marginnote"><img src="https://assets-auto.rbl.ms/248d7dc3241d5585d0d9feba16933a8f5352c8f3fd6fb575c246725b35128824" /></span></p>
<pre class="r"><code>body &lt;- &quot;Dear {name},

You have been assigned to surprise &lt;b&gt;{partner}&lt;/b&gt; with a happy gift! {partner} told us they have the following interests:

&lt;b&gt;{interests}&lt;/b&gt;

Remember, the price limit is $20. 

&lt;img src = &#39;https://media.giphy.com/media/zhPXoVIBMtnUs/giphy.gif&#39;&gt; &lt;/img&gt;

Happy white elephant-ing,
Sarah &amp; Lucy&quot;

our_template &lt;- glue::glue(glitter_template)

parcel &lt;- parcel_create(dat,
                        sender_name = &quot;Lucy&quot;,
                        sender_email = &quot;lucy@myemail.com&quot;,
                        subject = &quot;Secret Santa!&quot;,
                        template = our_template)

parcel_preview(parcel)     

parcel_send(parcel)</code></pre>
<p>This will create an email like this:</p>
<p><img src = "/images/2017-11-14/email.png" width = "500"></img></p>
<p>And that’s it! Happy gift-ing 🎁!</p>
<div class="figure">
<img src="https://media.giphy.com/media/zhPXoVIBMtnUs/giphy.gif" />

</div>
</div>
</section>
<section>
  

  



  


  <div id="disqus_thread"></div>
    <script type="text/javascript">
       
      var disqus_shortname = 'livefreeordichotomize'; 
      var disqus_identifier = '\/2017\/11\/15\/secret-sampling\/';
       
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


      
  <footer class="page-footer">
		<hr>
		<ul class="page-footer-menu">
		
		</ul>

  

	<div class="copyright">
	<p>
    
      &copy;2017
    .
    All rights reserved.
    
  </p>
</div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</footer>

</section>
</article>
</div>
</body>
</html>
