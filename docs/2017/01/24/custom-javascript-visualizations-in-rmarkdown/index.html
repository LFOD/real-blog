<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    


    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Custom JavaScript Visualizations in RMarkdown"/>
<meta name="twitter:description" content="I happened to stumble upon the preview release page for RStudio recently and noticed something that made me exorbitantly happy.
 A preview release of RStudio v1.0.136 is now available for testing and feedback. This release includes… Support for JavaScript and CSS chunks in R Notebooks…
 “Support for JavaScript and CSS chunks in R Notebooks”! As someone who loves using javascript for plotting (and secretly for manipulating) data this is massively exciting."/>



  	<meta property="og:title" content=" Custom JavaScript Visualizations in RMarkdown &middot;  Live Free or Dichotomize" />
  	<meta property="og:site_name" content="Live Free or Dichotomize" />
  	<meta property="og:url" content="/2017/01/24/custom-javascript-visualizations-in-rmarkdown/" />

    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2017-01-24T10:54:24&#43;02:00" />

    
    <meta property="og:article:tag" content="javascript" />
    
    <meta property="og:article:tag" content="visualization" />
    
    

    <title>
       Custom JavaScript Visualizations in RMarkdown &middot;  Live Free or Dichotomize
    </title>

    <meta name="description" content="A statistics blog from two goofy Phd students." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="../../../../images/favicon.ico">
	  <link rel="apple-touch-icon" href="../../../../images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="../../../../css/screen.css" />
    <link rel="stylesheet" type="text/css" href="../../../../css/nav.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="../../../../index.xml" rel="alternate" type="application/rss+xml" title="Live Free or Dichotomize" />
      
      
    
    <meta name="generator" content="Hugo 0.17" />

    <link rel="canonical" href="../../../../2017/01/24/custom-javascript-visualizations-in-rmarkdown/" />

    

    






</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="../../../../about/">About</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://github.com/lfod/blog">GitHub</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://twitter.com/LucyStats">Lucy&#39;s Twitter</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://twitter.com/NickStrayer">Nick&#39;s Twitter</a>
            </li>
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="../../../../index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
      <a class="blog-logo" href="../../../../"><img src="../../../../images/logo.png" alt="Home" /></a>
  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Custom JavaScript Visualizations in RMarkdown</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2017-01-24T10:54:24&#43;02:00">
            Jan 24, 2017
          </time>
        
         
          <span class="post-tag small"><a href="../../../../tags/javascript/">#javascript</a></span>
         
          <span class="post-tag small"><a href="../../../../tags/visualization/">#visualization</a></span>
         
        </section>
    </header>

    <section class="post-content">


<p><br></p>
<p>I happened to stumble upon the <a href="https://www.rstudio.com/products/rstudio/download/preview/">preview release page</a> for RStudio recently and noticed something that made me exorbitantly happy.</p>
<blockquote>
<p>A preview release of RStudio v1.0.136 is now available for testing and feedback. This release includes… Support for JavaScript and CSS chunks in R Notebooks…</p>
</blockquote>
<p><em>“Support for JavaScript and CSS chunks in R Notebooks”</em>! As someone who loves using javascript for plotting (and secretly for manipulating) data this is massively exciting. Previously my workflow for generating an interactive graphic would be something like:</p>
<ul>
<li>Download data</li>
<li>Clean data and do preliminary visualization in R</li>
<li>Export what I liked to a csv file and make a new directory with a set of <code>.html, .js, .css</code> files in it.</li>
<li>Load data into javascript/d3.js in the new javascript file.</li>
<li>Plot.</li>
</ul>
<p>This workflow has served me very well, I did it probably 20 times a day when working at the New York Times and I am very fast with it. If you want to just make a stand alone visualization it’s fantastic, however, as a biostatistician who works with a lot of other biostatisticians, people tend to want to see where the data comes from.</p>
<p>With Javascript chunks in <code>.Rmd</code> files you can explicitly show the code for data gathering/cleaning etc. in a language that your collaborators can understand, along with making custom d3 charts with that data. All without ever leaving RStudio. I will show you my quick and dirty solution to doing so.</p>
<div id="getting-data-into-javascript" class="section level2">
<h2>Getting data into Javascript</h2>
<p>Instead of generating a csv file in R and then loading that into javascript we will instead send the data directly through the html to javascript. (<em>Note:</em> This wont work well with super large data).</p>
<p>Inspired by <a href="https://medium.com/@becausealice2/getting-r-and-d3-js-to-play-nicely-in-r-markdown-270e302a52d3#.772g93eb3">this</a> medium post I wrote a little function that takes a dataframe and sends it to the html document in the <code>.json</code> format.</p>
<pre class="r"><code>library(tidyverse)
library(jsonlite)

send_df_to_js &lt;- function(df){
  cat(
    paste(
    &#39;&lt;script&gt;
      var data = &#39;,toJSON(df),&#39;;
    &lt;/script&gt;&#39;
    , sep=&quot;&quot;)
  )
}</code></pre>
<p>To illustrate how it works we will generate some random data into a dataframe.</p>
<pre class="r"><code>#Generate some random x and y data to plot
n &lt;- 300
random_data &lt;- data_frame(x = runif(n)*10) %&gt;% 
  mutate(y = 0.5*x^3 - 1.3*x^2 + rnorm(n, mean = 0, sd = 80),
         group = paste(&quot;group&quot;, sample(c(1,2,3), n, replace = T)))</code></pre>
<p>Now we send a snippit of the dataframe into the function to see the output…</p>
<pre class="r"><code>random_data %&gt;% 
  head() %&gt;% 
  send_df_to_js()</code></pre>
<pre><code>## &lt;script&gt;
##       var data = [{&quot;x&quot;:9.6104,&quot;y&quot;:369.6283,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:9.5669,&quot;y&quot;:448.6694,&quot;group&quot;:&quot;group 1&quot;},{&quot;x&quot;:3.1899,&quot;y&quot;:56.0401,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:2.0131,&quot;y&quot;:68.7271,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:1.034,&quot;y&quot;:-24.9267,&quot;group&quot;:&quot;group 1&quot;},{&quot;x&quot;:0.4234,&quot;y&quot;:-147.0608,&quot;group&quot;:&quot;group 3&quot;}];
##     &lt;/script&gt;</code></pre>
<p>Beautiful, we have our data, in <code>json</code> format, wrapped in a script tag. Now we can send the whole dataframe through. This time I am using the <code>results = &quot;asis&quot;</code> option in the code chunk (<code>{r, results = &quot;asis&quot;}</code>), to write the results directly to the html document and not to the output like we did above.</p>
<pre class="r"><code>#Initiate data transfer protocol one
send_df_to_js(random_data)</code></pre>
<script>
      var data = [{"x":9.6104,"y":369.6283,"group":"group 2"},{"x":9.5669,"y":448.6694,"group":"group 1"},{"x":3.1899,"y":56.0401,"group":"group 2"},{"x":2.0131,"y":68.7271,"group":"group 2"},{"x":1.034,"y":-24.9267,"group":"group 1"},{"x":0.4234,"y":-147.0608,"group":"group 3"},{"x":7.4777,"y":221.5663,"group":"group 3"},{"x":9.1691,"y":290.7417,"group":"group 2"},{"x":1.5187,"y":-87.5155,"group":"group 2"},{"x":4.793,"y":5.8362,"group":"group 3"},{"x":5.2425,"y":115.8271,"group":"group 1"},{"x":7.04,"y":107.596,"group":"group 1"},{"x":4.4961,"y":5.0336,"group":"group 1"},{"x":9.8365,"y":337.7054,"group":"group 2"},{"x":6.2872,"y":-12.5341,"group":"group 1"},{"x":6.2636,"y":5.8168,"group":"group 1"},{"x":5.6908,"y":97.8743,"group":"group 2"},{"x":9.6214,"y":250.6018,"group":"group 3"},{"x":1.4519,"y":-60.4741,"group":"group 1"},{"x":2.7494,"y":-59.2268,"group":"group 2"},{"x":2.6559,"y":19.976,"group":"group 1"},{"x":0.8774,"y":-9.2941,"group":"group 2"},{"x":4.3486,"y":21.7518,"group":"group 1"},{"x":2.7639,"y":-62.4292,"group":"group 1"},{"x":8.4066,"y":235.4578,"group":"group 3"},{"x":4.29,"y":-13.004,"group":"group 1"},{"x":8.5188,"y":129.4003,"group":"group 3"},{"x":1.6189,"y":122.137,"group":"group 1"},{"x":0.3104,"y":-45.6963,"group":"group 1"},{"x":3.3896,"y":20.7575,"group":"group 3"},{"x":0.6824,"y":-29.4902,"group":"group 3"},{"x":6.2897,"y":1.7756,"group":"group 3"},{"x":1.1706,"y":-109.534,"group":"group 2"},{"x":6.9312,"y":139.2172,"group":"group 1"},{"x":0.8149,"y":-22.631,"group":"group 1"},{"x":2.0972,"y":-7.0921,"group":"group 1"},{"x":0.6671,"y":52.3506,"group":"group 2"},{"x":3.9818,"y":-35.4148,"group":"group 1"},{"x":9.1698,"y":219.0156,"group":"group 3"},{"x":2.8214,"y":-58.8949,"group":"group 2"},{"x":5.6286,"y":190.7894,"group":"group 2"},{"x":7.3298,"y":168.5223,"group":"group 3"},{"x":1.4888,"y":46.551,"group":"group 1"},{"x":3.2421,"y":-65.7499,"group":"group 2"},{"x":2.8575,"y":-75.8951,"group":"group 1"},{"x":5.9061,"y":-90.7654,"group":"group 3"},{"x":0.3373,"y":111.3786,"group":"group 1"},{"x":1.6937,"y":19.6645,"group":"group 3"},{"x":3.0049,"y":1.9883,"group":"group 3"},{"x":2.6129,"y":-84.7883,"group":"group 1"},{"x":1.0674,"y":-50.3577,"group":"group 1"},{"x":5.6282,"y":2.8703,"group":"group 1"},{"x":6.4375,"y":2.0302,"group":"group 1"},{"x":4.0914,"y":58.0136,"group":"group 3"},{"x":4.8139,"y":55.4746,"group":"group 2"},{"x":7.1662,"y":101.8659,"group":"group 1"},{"x":6.5274,"y":113.4548,"group":"group 2"},{"x":4.9577,"y":37.1158,"group":"group 1"},{"x":0.2651,"y":-69.8405,"group":"group 1"},{"x":9.8778,"y":249.66,"group":"group 2"},{"x":2.4582,"y":-9.4201,"group":"group 2"},{"x":4.5407,"y":-119.3027,"group":"group 1"},{"x":4.8268,"y":-128.2678,"group":"group 2"},{"x":4.1766,"y":51.8542,"group":"group 3"},{"x":1.4124,"y":32.2644,"group":"group 3"},{"x":5.189,"y":-68.0087,"group":"group 2"},{"x":4.8078,"y":-1.8252,"group":"group 2"},{"x":8.3102,"y":134.4936,"group":"group 1"},{"x":9.569,"y":309.693,"group":"group 1"},{"x":5.5452,"y":93.2238,"group":"group 3"},{"x":7.1171,"y":19.0215,"group":"group 1"},{"x":8.4783,"y":68.6467,"group":"group 1"},{"x":3.2628,"y":-28.8957,"group":"group 3"},{"x":9.9327,"y":304.1176,"group":"group 2"},{"x":3.9741,"y":37.547,"group":"group 1"},{"x":0.2797,"y":-48.7608,"group":"group 1"},{"x":1.7888,"y":-26.19,"group":"group 2"},{"x":0.6874,"y":46.3918,"group":"group 3"},{"x":8.8412,"y":331.4379,"group":"group 2"},{"x":6.9364,"y":-9.3675,"group":"group 2"},{"x":6.6141,"y":80.2027,"group":"group 3"},{"x":3.694,"y":-5.947,"group":"group 3"},{"x":1.1587,"y":-153.7016,"group":"group 1"},{"x":4.398,"y":10.7772,"group":"group 1"},{"x":8.9926,"y":290.817,"group":"group 3"},{"x":7.8159,"y":99.3223,"group":"group 3"},{"x":8.9599,"y":263.1557,"group":"group 1"},{"x":4.1653,"y":-18.4924,"group":"group 1"},{"x":2.0812,"y":8.5529,"group":"group 3"},{"x":2.4323,"y":123.4395,"group":"group 3"},{"x":9.5083,"y":412.192,"group":"group 1"},{"x":2.0176,"y":-129.1546,"group":"group 2"},{"x":1.8591,"y":-64.466,"group":"group 1"},{"x":0.781,"y":-3.7422,"group":"group 3"},{"x":3.3463,"y":-47.5345,"group":"group 1"},{"x":5.4602,"y":-58.6252,"group":"group 3"},{"x":1.9328,"y":17.5118,"group":"group 1"},{"x":0.765,"y":136.4441,"group":"group 1"},{"x":9.1692,"y":211.7925,"group":"group 2"},{"x":6.8789,"y":125.8567,"group":"group 1"},{"x":8.8807,"y":313.6199,"group":"group 2"},{"x":8.2161,"y":320.0919,"group":"group 2"},{"x":8.6853,"y":301.2305,"group":"group 2"},{"x":5.3295,"y":-29.3862,"group":"group 3"},{"x":1.7883,"y":52.6079,"group":"group 2"},{"x":9.2383,"y":359.1276,"group":"group 2"},{"x":1.9506,"y":-47.8778,"group":"group 2"},{"x":4.3191,"y":85.2678,"group":"group 1"},{"x":9.3337,"y":35.2476,"group":"group 1"},{"x":6.2543,"y":97.0777,"group":"group 2"},{"x":1.8676,"y":-20.5353,"group":"group 1"},{"x":5.1785,"y":8.1381,"group":"group 2"},{"x":0.9223,"y":-46.7842,"group":"group 1"},{"x":7.9575,"y":125.5809,"group":"group 3"},{"x":8.8103,"y":163.0486,"group":"group 2"},{"x":8.9132,"y":124.6846,"group":"group 2"},{"x":9.0827,"y":340.55,"group":"group 3"},{"x":8.8813,"y":370.3482,"group":"group 1"},{"x":3.2248,"y":-201.0152,"group":"group 2"},{"x":6.821,"y":102.6446,"group":"group 3"},{"x":6.7687,"y":31.6627,"group":"group 3"},{"x":8.432,"y":237.3388,"group":"group 1"},{"x":8.4303,"y":197.4818,"group":"group 3"},{"x":1.0147,"y":94.8946,"group":"group 2"},{"x":2.0272,"y":6.9061,"group":"group 3"},{"x":3.524,"y":-106.1687,"group":"group 1"},{"x":4.6802,"y":146.4303,"group":"group 1"},{"x":6.1308,"y":-44.1392,"group":"group 2"},{"x":9.546,"y":323.9839,"group":"group 3"},{"x":8.4873,"y":195.0864,"group":"group 3"},{"x":3.5432,"y":3.0802,"group":"group 3"},{"x":5.4042,"y":-50.7703,"group":"group 1"},{"x":5.4167,"y":124.4583,"group":"group 1"},{"x":4.9286,"y":1.7254,"group":"group 2"},{"x":8.0768,"y":96.2342,"group":"group 3"},{"x":0.6125,"y":-47.0313,"group":"group 1"},{"x":5.084,"y":133.6135,"group":"group 3"},{"x":6.1977,"y":64.1399,"group":"group 3"},{"x":6.387,"y":67.3765,"group":"group 1"},{"x":2.105,"y":132.2874,"group":"group 1"},{"x":2.2885,"y":59.6377,"group":"group 2"},{"x":7.338,"y":163.5432,"group":"group 1"},{"x":4.8092,"y":-56.9968,"group":"group 1"},{"x":8.786,"y":407.3707,"group":"group 3"},{"x":7.3774,"y":38.6836,"group":"group 3"},{"x":0.7466,"y":-129.7414,"group":"group 3"},{"x":7.4134,"y":203.1655,"group":"group 1"},{"x":6.3809,"y":121.7449,"group":"group 1"},{"x":1.6786,"y":-74.5339,"group":"group 1"},{"x":9.1089,"y":472.101,"group":"group 2"},{"x":5.124,"y":226.8437,"group":"group 1"},{"x":2.0613,"y":-135.6745,"group":"group 3"},{"x":6.0506,"y":-121.4133,"group":"group 3"},{"x":9.6659,"y":396.5696,"group":"group 3"},{"x":8.8116,"y":253.4097,"group":"group 3"},{"x":6.6675,"y":76.714,"group":"group 2"},{"x":7.5352,"y":63.5243,"group":"group 3"},{"x":9.8469,"y":365.6626,"group":"group 3"},{"x":5.4915,"y":111.4456,"group":"group 1"},{"x":8.6829,"y":270.7065,"group":"group 3"},{"x":2.8751,"y":-45.2804,"group":"group 3"},{"x":1.2846,"y":108.4536,"group":"group 3"},{"x":8.8615,"y":242.2575,"group":"group 1"},{"x":6.7331,"y":-3.016,"group":"group 2"},{"x":9.932,"y":361.3049,"group":"group 3"},{"x":0.9807,"y":-79.9723,"group":"group 3"},{"x":1.1894,"y":31.4495,"group":"group 3"},{"x":7.8955,"y":225.0331,"group":"group 2"},{"x":4.6464,"y":53.7969,"group":"group 2"},{"x":0.1895,"y":61.6242,"group":"group 3"},{"x":8.436,"y":320.5553,"group":"group 2"},{"x":6.5976,"y":153.8868,"group":"group 1"},{"x":1.2031,"y":57.7785,"group":"group 3"},{"x":8.2113,"y":86.6536,"group":"group 3"},{"x":0.699,"y":41.9553,"group":"group 3"},{"x":6.5923,"y":45.0839,"group":"group 2"},{"x":4.3234,"y":-8.5186,"group":"group 2"},{"x":6.6118,"y":-65.161,"group":"group 3"},{"x":8.4424,"y":172.5098,"group":"group 2"},{"x":0.101,"y":25.7807,"group":"group 3"},{"x":6.0544,"y":-102.9532,"group":"group 1"},{"x":2.9091,"y":119.1613,"group":"group 1"},{"x":8.0922,"y":99.362,"group":"group 2"},{"x":6.3015,"y":7.8068,"group":"group 1"},{"x":1.5574,"y":123.5071,"group":"group 2"},{"x":9.3149,"y":266.3582,"group":"group 2"},{"x":1.2591,"y":84.9386,"group":"group 3"},{"x":3.855,"y":-106.9295,"group":"group 2"},{"x":5.1356,"y":-178.4418,"group":"group 2"},{"x":6.1692,"y":-9.2538,"group":"group 1"},{"x":2.2537,"y":15.4251,"group":"group 1"},{"x":5.4405,"y":-67.6622,"group":"group 3"},{"x":5.1306,"y":46.0276,"group":"group 1"},{"x":8.5898,"y":220.5246,"group":"group 3"},{"x":8.2634,"y":220.0407,"group":"group 1"},{"x":3.3419,"y":42.3181,"group":"group 1"},{"x":5.2622,"y":10.044,"group":"group 3"},{"x":1.5669,"y":-12.0077,"group":"group 3"},{"x":3.6433,"y":52.7485,"group":"group 1"},{"x":0.4665,"y":-62.062,"group":"group 3"},{"x":6.423,"y":171.5802,"group":"group 3"},{"x":2.3191,"y":-30.8526,"group":"group 3"},{"x":9.0265,"y":284.0343,"group":"group 3"},{"x":3.3129,"y":-84.7322,"group":"group 3"},{"x":3.9621,"y":-49.0152,"group":"group 2"},{"x":2.1098,"y":114.6521,"group":"group 2"},{"x":8.8224,"y":315.9619,"group":"group 2"},{"x":3.3333,"y":71.6892,"group":"group 3"},{"x":1.595,"y":61.1745,"group":"group 2"},{"x":6.4502,"y":4.5873,"group":"group 1"},{"x":2.4787,"y":-27.6662,"group":"group 2"},{"x":7.7888,"y":159.59,"group":"group 3"},{"x":9.0736,"y":399.5252,"group":"group 2"},{"x":9.6596,"y":319.653,"group":"group 2"},{"x":7.9879,"y":158.619,"group":"group 2"},{"x":0.7928,"y":6.5717,"group":"group 3"},{"x":0.1737,"y":25.7334,"group":"group 2"},{"x":0.6693,"y":129.3095,"group":"group 3"},{"x":5.7132,"y":-37.5528,"group":"group 2"},{"x":9.9219,"y":484.6077,"group":"group 1"},{"x":3.2015,"y":-81.4179,"group":"group 3"},{"x":1.5891,"y":-6.8592,"group":"group 3"},{"x":0.8691,"y":-60.4273,"group":"group 2"},{"x":4.3377,"y":47.0066,"group":"group 1"},{"x":2.5174,"y":74.7934,"group":"group 2"},{"x":1.514,"y":97.6012,"group":"group 1"},{"x":1.2367,"y":110.4666,"group":"group 2"},{"x":3.0366,"y":67.1998,"group":"group 3"},{"x":5.8423,"y":-18.2044,"group":"group 1"},{"x":7.6059,"y":116.9745,"group":"group 2"},{"x":7.4775,"y":219.7425,"group":"group 3"},{"x":0.6713,"y":-21.2419,"group":"group 2"},{"x":2.1422,"y":-274.0695,"group":"group 1"},{"x":4.0275,"y":46.7866,"group":"group 3"},{"x":2.2722,"y":-103.3262,"group":"group 1"},{"x":3.8718,"y":-45.6553,"group":"group 3"},{"x":4.8748,"y":89.9455,"group":"group 2"},{"x":6.7551,"y":-83.0673,"group":"group 3"},{"x":0.9497,"y":-218.0504,"group":"group 1"},{"x":7.7493,"y":125.8205,"group":"group 3"},{"x":2.8201,"y":29.0398,"group":"group 1"},{"x":4.2667,"y":76.8514,"group":"group 2"},{"x":0.9143,"y":10.6911,"group":"group 3"},{"x":8.3756,"y":151.1292,"group":"group 2"},{"x":8.4459,"y":300.5434,"group":"group 3"},{"x":1.983,"y":-1.2175,"group":"group 1"},{"x":9.8173,"y":471.3013,"group":"group 3"},{"x":4.5427,"y":15.5635,"group":"group 1"},{"x":5.0178,"y":-90.5353,"group":"group 3"},{"x":5.4479,"y":15.7157,"group":"group 1"},{"x":5.7946,"y":-27.0516,"group":"group 3"},{"x":7.5403,"y":97.9331,"group":"group 2"},{"x":1.3616,"y":5.9326,"group":"group 1"},{"x":1.3281,"y":14.4268,"group":"group 2"},{"x":5.1626,"y":-62.7377,"group":"group 1"},{"x":4.1437,"y":-35.6446,"group":"group 3"},{"x":3.2455,"y":-64.7222,"group":"group 3"},{"x":2.9438,"y":-46.9825,"group":"group 1"},{"x":1.1669,"y":-3.6003,"group":"group 3"},{"x":1.2454,"y":115.6185,"group":"group 2"},{"x":8.5711,"y":150.8542,"group":"group 3"},{"x":7.3603,"y":146.9243,"group":"group 3"},{"x":2.0383,"y":170.2934,"group":"group 3"},{"x":8.5157,"y":239.1374,"group":"group 1"},{"x":8.7916,"y":291.0096,"group":"group 2"},{"x":0.3458,"y":128.1604,"group":"group 1"},{"x":2.4641,"y":14.3734,"group":"group 3"},{"x":6.2669,"y":89.2288,"group":"group 3"},{"x":7.6897,"y":163.0721,"group":"group 2"},{"x":6.1393,"y":215.2607,"group":"group 3"},{"x":2.6882,"y":-66.4528,"group":"group 2"},{"x":0.9077,"y":8.5008,"group":"group 3"},{"x":7.5766,"y":236.2978,"group":"group 3"},{"x":8.1458,"y":161.8908,"group":"group 2"},{"x":2.4763,"y":43.2133,"group":"group 1"},{"x":2.4048,"y":12.2261,"group":"group 1"},{"x":6.2649,"y":77.6841,"group":"group 2"},{"x":0.5043,"y":42.271,"group":"group 3"},{"x":1.4343,"y":92.7677,"group":"group 3"},{"x":8.6167,"y":180.2736,"group":"group 1"},{"x":8.4337,"y":251.0791,"group":"group 2"},{"x":0.5152,"y":43.1442,"group":"group 3"},{"x":7.7154,"y":108.8023,"group":"group 3"},{"x":5.2797,"y":-112.5712,"group":"group 3"},{"x":3.8114,"y":140.6291,"group":"group 1"},{"x":5.2671,"y":-31.4367,"group":"group 1"},{"x":6.0348,"y":63.1617,"group":"group 3"},{"x":1.4375,"y":-124.8989,"group":"group 2"},{"x":7.9168,"y":81.4413,"group":"group 3"},{"x":1.9064,"y":129.9318,"group":"group 2"},{"x":6.7902,"y":68.9643,"group":"group 1"},{"x":0.9078,"y":12.5923,"group":"group 1"},{"x":4.243,"y":-6.7524,"group":"group 3"},{"x":0.3208,"y":-93.8898,"group":"group 3"},{"x":4.5326,"y":-99.1069,"group":"group 2"},{"x":0.7731,"y":-181.0535,"group":"group 3"},{"x":8.1078,"y":223.7864,"group":"group 3"},{"x":1.1711,"y":66.624,"group":"group 2"},{"x":0.1689,"y":-12.0151,"group":"group 2"},{"x":4.3954,"y":-43.4792,"group":"group 2"}];
    </script>
<p>Now our data is inside our page’s javascript scope and ready to be played with!</p>
</div>
<div id="drawing-pretty-pictures" class="section level2">
<h2>Drawing pretty pictures</h2>
<p>Let’s make a super simple d3 scatter plot to see this randomly generated data. All I have to do is include my desired javascript libraries, make a <code>div</code> element for my visualization to go into and then put my <code>{js}</code> block in. RMarkdown will slot the javascript into the page and we’re good to go.</p>
<p>In this example I did…</p>
<pre><code>&lt;script src=&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://d3js.org/d3.v4.min.js&quot;&gt;&lt;/script&gt;

&lt;div id = &quot;viz&quot;&gt;&lt;/div&gt; 

` ` `{js}
//code goes here
` ` `</code></pre>
</div>
<div id="did-it-work" class="section level2">
<h2>Did it work?</h2>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<div id="viz">

</div>
<script type="text/javascript">
var point_vals = d3.select("#viz")
  .append("p")
  .attr("align", "center")
  .text("Mouseover some data!");

//Get how wide our page is in pixels so we can draw our plot in it
var page_width = $("#did-it-work").width();
  
// set the dimensions and margins of the graph
var margin = 30,
    width = page_width - 2*margin,
    height = page_width*0.8 - 2*margin;
    
// Find max data values
var x_extent = d3.extent(data, d => d.x);
var y_extent = d3.extent(data, d => d.y);

// Set the scales 
var x = d3.scaleLinear()
  .domain(x_extent)
  .range([0, width]);
  
var y = d3.scaleLinear()
  .domain(y_extent)
  .range([height, 0]);

//Set up our SVG element
var svg = d3.select("#viz").append("svg")
    .attr("width", width + 2*margin)
    .attr("height", height + 2*margin)
  .append("g")
    .attr("transform",
          "translate(" + margin + "," + margin + ")");

var bounce_select = d3.transition()
    .duration(1000)
    .ease(d3.easeElastic.period(0.4));
    
// Add the scatterplot
svg.selectAll(".dots")
    .data(data)
  .enter().append("circle")
    .attr("class", "dots")
    .attr("fill", d => d.group === "group 1"? "steelblue":"orangered")
    .attr("fill-opacity", 0.3)
    .attr("r", 5)
    .attr("cx", d => x(d.x) )
    .attr("cy", d => y(d.y) )
    .on("mouseover", function(d){
       d3.selectAll(".dots").attr("r", 5) //make sure all the dots are small
       d3.select(this)
        .transition(bounce_select)
        .attr("r", 10);
      
       point_vals.text("X:" + d.x + " Y:" + d.y) //change the title of the graph to the datapoint
    });
    
// Draw the axes    
// Add the X Axis
svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

// Add the Y Axis
svg.append("g")
    .call(d3.axisLeft(y));
</script>
</div>
<div id="why-when" class="section level2">
<h2>Why/ When</h2>
<p>This is a bad example of a visualization for this scenario as something like plotly could do this in much less effort. If you’re doing something more complicated/ bespoke then this is a great resource to have.</p>
</div>
<div id="addendum" class="section level2">
<h2>Addendum</h2>
<p>If you’re interested, here’s the javascript code I included to make the above graph.</p>
<pre><code>var point_vals = d3.select(&quot;#viz&quot;).append(&quot;p&quot;).text(&quot;Mouseover some data!&quot;);

//Get how wide our page is in pixels so we can draw our plot in it
var page_width = $(&quot;#did-it-work&quot;).width();
  
// set the dimensions and margins of the graph
var margin = 20,
    width = page_width - 2*margin,
    height = page_width*0.8 - 2*margin;
    
// Find max data values
var x_extent = d3.extent(data, d =&gt; d.x);
var y_extent = d3.extent(data, d =&gt; d.y);

// Set the scales 
var x = d3.scaleLinear()
  .domain(x_extent)
  .range([0, width]);
  
var y = d3.scaleLinear()
  .domain(y_extent)
  .range([height, 0]);

//Set up our SVG element
var svg = d3.select(&quot;#viz&quot;).append(&quot;svg&quot;)
    .attr(&quot;width&quot;, width + 2*margin)
    .attr(&quot;height&quot;, height + 2*margin)
  .append(&quot;g&quot;)
    .attr(&quot;transform&quot;,
          &quot;translate(&quot; + margin + &quot;,&quot; + margin + &quot;)&quot;);

var bounce_select = d3.transition()
    .duration(1000)
    .ease(d3.easeElastic.period(0.4));
    
// Add the scatterplot
svg.selectAll(&quot;.dots&quot;)
    .data(data)
  .enter().append(&quot;circle&quot;)
    .attr(&quot;class&quot;, &quot;dots&quot;)
    .attr(&quot;fill&quot;, d =&gt; d.group === &quot;group 1&quot;? &quot;steelblue&quot;:&quot;orangered&quot;)
    .attr(&quot;fill-opacity&quot;, 0.3)
    .attr(&quot;r&quot;, 5)
    .attr(&quot;cx&quot;, d =&gt; x(d.x) )
    .attr(&quot;cy&quot;, d =&gt; y(d.y) )
    .on(&quot;mouseover&quot;, function(d){
       d3.selectAll(&quot;.dots&quot;).attr(&quot;r&quot;, 5) //make sure all the dots are small
       d3.select(this)
        .transition(bounce_select)
        .attr(&quot;r&quot;, 10);
      
       point_vals.text(&quot;X:&quot; + d.x + &quot; Y:&quot; + d.y) //change the title of the graph to the datapoint
    });
    
// Draw the axes    
// Add the X Axis
svg.append(&quot;g&quot;)
    .attr(&quot;transform&quot;, &quot;translate(0,&quot; + height + &quot;)&quot;)
    .call(d3.axisBottom(x));

// Add the Y Axis
svg.append(&quot;g&quot;)
    .call(d3.axisLeft(y));</code></pre>
</div>




    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="../../../../" style="background-image: url(/images/logo.png)"><span class="hidden">'s Picture</span></a>
    </figure>
    

    








<div class="post-author">

    <img style = "border-radius: 25px;" src="https://avatars0.githubusercontent.com/u/6764693?v=3&amp;u=c9c491a636605fe3d6122defb43eb367b3d9381f&amp;s=400" alt="Nick Strayer image" width="90" height="90">
    <br>
    <span style="font-size: 1.02em;font-weight: bold;">
        Nick Strayer
    </span>
    |
    <a style = "text-decoration: none;" class = "post-author__text" href = http://nickstrayer.me >
        <img style="width:20px;" src = "http://image.flaticon.com/icons/png/128/12/12195.png"/>
    </a>

    <a class="icon-twitter post-author__text" style="font-size: 1.4em; text-decoration: none;" href = https://twitter.com/NicholasStrayer onclick="window.open(this.href"></a>

    <a style = "text-decoration: none;" class = "post-author__text" href = https://github.com/nstrayer >
        <img style="width:23px;" src = "https://a248.e.akamai.net/assets.github.com/images/icons/emoji/octocat.png"/>
    </a>


    <br>

    <p class="post-author__text">Randomly walking my way though a career in statistics</p>
    


    
<section class="share">
  <p style="font-size: 1em; font-weight:bold;">Share this post <a class="icon-twitter" style="font-size: 1.1em" href="https://twitter.com/share?text=Custom%20JavaScript%20Visualizations%20in%20RMarkdown&nbsp;-&nbsp;Live%20Free%20or%20Dichotomize&amp;url=https://livefreeordichotomize.com%2f2017%2f01%2f24%2fcustom-javascript-visualizations-in-rmarkdown%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
 </a></p>
</section>



    




  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Live Free or Dichotomize</a> </section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="../../../../js/jquery.js"></script>
    <script type="text/javascript" src="../../../../js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="../../../../js/index.js"></script>
    
</body>
</html>

