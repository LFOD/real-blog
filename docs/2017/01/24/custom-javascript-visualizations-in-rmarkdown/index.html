<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    


    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Custom JavaScript Visualizations in RMarkdown"/>
<meta name="twitter:description" content="I happened to stumble upon the preview release page for RStudio recently and noticed something that made me exorbitantly happy.
 A preview release of RStudio v1.0.136 is now available for testing and feedback. This release includes… Support for JavaScript and CSS chunks in R Notebooks…
 “Support for JavaScript and CSS chunks in R Notebooks”! As someone who loves using javascript for plotting (and secretly for manipulating) data this is massively exciting."/>



  	<meta property="og:title" content=" Custom JavaScript Visualizations in RMarkdown &middot;  Live Free or Dichotomize" />
  	<meta property="og:site_name" content="Live Free or Dichotomize" />
  	<meta property="og:url" content="/2017/01/24/custom-javascript-visualizations-in-rmarkdown/" />

    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2017-01-24T10:54:24&#43;02:00" />

    
    <meta property="og:article:tag" content="javascript" />
    
    <meta property="og:article:tag" content="visualization" />
    
    

    <title>
       Custom JavaScript Visualizations in RMarkdown &middot;  Live Free or Dichotomize
    </title>

    <meta name="description" content="A statistics blog from two goofy Phd students." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="../../../../images/favicon.ico">
	  <link rel="apple-touch-icon" href="../../../../images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="../../../../css/screen.css" />
    <link rel="stylesheet" type="text/css" href="../../../../css/nav.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="../../../../index.xml" rel="alternate" type="application/rss+xml" title="Live Free or Dichotomize" />
      
      
    
    <meta name="generator" content="Hugo 0.18.1" />

    <link rel="canonical" href="../../../../2017/01/24/custom-javascript-visualizations-in-rmarkdown/" />

    

    






</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="../../../../about/">About</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://github.com/lfod/blog">GitHub</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://twitter.com/LucyStats">Lucy&#39;s Twitter</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://twitter.com/NickStrayer">Nick&#39;s Twitter</a>
            </li>
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="../../../../index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
      <a class="blog-logo" href="../../../../"><img src="../../../../images/logo.png" alt="Home" /></a>
  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Custom JavaScript Visualizations in RMarkdown</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2017-01-24T10:54:24&#43;02:00">
            Jan 24, 2017
          </time>
        
         
          <span class="post-tag small"><a href="../../../../tags/javascript/">#javascript</a></span>
         
          <span class="post-tag small"><a href="../../../../tags/visualization/">#visualization</a></span>
         
        </section>
    </header>

    <section class="post-content">


<p>I happened to stumble upon the <a href="https://www.rstudio.com/products/rstudio/download/preview/">preview release page</a> for RStudio recently and noticed something that made me exorbitantly happy.</p>
<blockquote>
<p>A preview release of RStudio v1.0.136 is now available for testing and feedback. This release includes… Support for JavaScript and CSS chunks in R Notebooks…</p>
</blockquote>
<p><em>“Support for JavaScript and CSS chunks in R Notebooks”</em>! As someone who loves using javascript for plotting (and secretly for manipulating) data this is massively exciting. Previously my workflow for generating an interactive graphic would be something like:</p>
<ul>
<li>Download data</li>
<li>Clean data and do preliminary visualization in R</li>
<li>Export what I liked to a csv file and make a new directory with a set of <code>.html, .js, .css</code> files in it.</li>
<li>Load data into javascript/d3.js in the new javascript file.</li>
<li>Plot.</li>
</ul>
<p>This workflow has served me very well, I did it probably 20 times a day when working at the New York Times and I am very fast with it. If you want to just make a stand alone visualization it’s fantastic, however, as a biostatistician who works with a lot of other biostatisticians, people tend to want to see where the data comes from.</p>
<p>With Javascript chunks in <code>.Rmd</code> files you can explicitly show the code for data gathering/cleaning etc. in a language that your collaborators can understand, along with making custom d3 charts with that data. All without ever leaving RStudio. I will show you my quick and dirty solution to doing so.</p>
<div id="getting-data-into-javascript" class="section level2">
<h2>Getting data into Javascript</h2>
<p>Instead of generating a csv file in R and then loading that into javascript we will instead send the data directly through the html to javascript. (<em>Note:</em> This wont work well with super large data).</p>
<p>Inspired by <a href="https://medium.com/@becausealice2/getting-r-and-d3-js-to-play-nicely-in-r-markdown-270e302a52d3#.772g93eb3">this</a> medium post I wrote a little function that takes a dataframe and sends it to the html document in the <code>.json</code> format.</p>
<pre class="r"><code>library(tidyverse)
library(jsonlite)

send_df_to_js &lt;- function(df){
  cat(
    paste(
    &#39;&lt;script&gt;
      var data = &#39;,toJSON(df),&#39;;
    &lt;/script&gt;&#39;
    , sep=&quot;&quot;)
  )
}</code></pre>
<p>To illustrate how it works we will generate some random data into a dataframe.</p>
<pre class="r"><code>#Generate some random x and y data to plot
n &lt;- 300
random_data &lt;- data_frame(x = runif(n)*10) %&gt;% 
  mutate(y = 0.5*x^3 - 1.3*x^2 + rnorm(n, mean = 0, sd = 80),
         group = paste(&quot;group&quot;, sample(c(1,2,3), n, replace = T)))</code></pre>
<p>Now we send a snippit of the dataframe into the function to see the output…</p>
<pre class="r"><code>random_data %&gt;% 
  head() %&gt;% 
  send_df_to_js()</code></pre>
<pre><code>## &lt;script&gt;
##       var data = [{&quot;x&quot;:8.1488,&quot;y&quot;:96.6117,&quot;group&quot;:&quot;group 1&quot;},{&quot;x&quot;:6.1778,&quot;y&quot;:-8.111,&quot;group&quot;:&quot;group 3&quot;},{&quot;x&quot;:7.5453,&quot;y&quot;:220.3397,&quot;group&quot;:&quot;group 1&quot;},{&quot;x&quot;:5.5064,&quot;y&quot;:151.3852,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:7.1707,&quot;y&quot;:211.4072,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:5.6925,&quot;y&quot;:73.8435,&quot;group&quot;:&quot;group 1&quot;}];
##     &lt;/script&gt;</code></pre>
<p>Beautiful, we have our data, in <code>json</code> format, wrapped in a script tag. Now we can send the whole dataframe through. This time I am using the <code>results = &quot;asis&quot;</code> option in the code chunk (<code>{r, results = &quot;asis&quot;}</code>), to write the results directly to the html document and not to the output like we did above.</p>
<pre class="r"><code>#Initiate data transfer protocol one
send_df_to_js(random_data)</code></pre>
<script>
      var data = [{"x":8.1488,"y":96.6117,"group":"group 1"},{"x":6.1778,"y":-8.111,"group":"group 3"},{"x":7.5453,"y":220.3397,"group":"group 1"},{"x":5.5064,"y":151.3852,"group":"group 2"},{"x":7.1707,"y":211.4072,"group":"group 2"},{"x":5.6925,"y":73.8435,"group":"group 1"},{"x":9.8733,"y":434.6869,"group":"group 1"},{"x":0.6548,"y":-131.167,"group":"group 2"},{"x":5.0106,"y":82.6066,"group":"group 2"},{"x":8.6302,"y":217.2613,"group":"group 3"},{"x":4.214,"y":-65.5135,"group":"group 1"},{"x":6.6978,"y":95.5804,"group":"group 3"},{"x":2.1345,"y":-18.2683,"group":"group 1"},{"x":1.796,"y":51.7719,"group":"group 3"},{"x":8.8365,"y":164.7346,"group":"group 1"},{"x":6.096,"y":233.7256,"group":"group 3"},{"x":3.9848,"y":71.5214,"group":"group 3"},{"x":2.232,"y":36.3148,"group":"group 3"},{"x":2.0791,"y":29.6141,"group":"group 3"},{"x":0.6498,"y":-170.3427,"group":"group 1"},{"x":7.3845,"y":197.5176,"group":"group 1"},{"x":5.6734,"y":114.7644,"group":"group 1"},{"x":8.5065,"y":310.2111,"group":"group 3"},{"x":6.4425,"y":171.1377,"group":"group 2"},{"x":5.3735,"y":89.4814,"group":"group 2"},{"x":8.759,"y":334.2592,"group":"group 1"},{"x":4.1302,"y":-59.2159,"group":"group 2"},{"x":0.7245,"y":5.3107,"group":"group 1"},{"x":2.9186,"y":-79.7449,"group":"group 2"},{"x":2.231,"y":-7.8016,"group":"group 3"},{"x":2.817,"y":27.6046,"group":"group 1"},{"x":9.0109,"y":317.4605,"group":"group 3"},{"x":0.2359,"y":-13.5139,"group":"group 3"},{"x":0.4167,"y":-76.7657,"group":"group 1"},{"x":9.2292,"y":329.4708,"group":"group 1"},{"x":9.7817,"y":369.2217,"group":"group 2"},{"x":9.3471,"y":328.3486,"group":"group 1"},{"x":5.3908,"y":89.6909,"group":"group 1"},{"x":7.9657,"y":86.1436,"group":"group 2"},{"x":2.8891,"y":-90.6691,"group":"group 2"},{"x":3.4244,"y":-63.4164,"group":"group 2"},{"x":0.3259,"y":7.2115,"group":"group 1"},{"x":4.2181,"y":17.1653,"group":"group 1"},{"x":2.5377,"y":68.8204,"group":"group 2"},{"x":4.6841,"y":-1.2771,"group":"group 1"},{"x":6.112,"y":198.1667,"group":"group 3"},{"x":1.312,"y":-26.5314,"group":"group 3"},{"x":6.1232,"y":140.2705,"group":"group 2"},{"x":2.8084,"y":-100.7098,"group":"group 3"},{"x":0.2974,"y":109.4702,"group":"group 1"},{"x":8.3821,"y":28.4643,"group":"group 2"},{"x":4.3244,"y":-32.7479,"group":"group 2"},{"x":2.7742,"y":162.9056,"group":"group 1"},{"x":4.9855,"y":8.3306,"group":"group 1"},{"x":2.5288,"y":60.7449,"group":"group 1"},{"x":3.6428,"y":80.2048,"group":"group 3"},{"x":5.577,"y":-44.4998,"group":"group 3"},{"x":9.9875,"y":328.0166,"group":"group 3"},{"x":4.1718,"y":14.4197,"group":"group 1"},{"x":3.2655,"y":12.301,"group":"group 1"},{"x":1.1075,"y":23.8325,"group":"group 2"},{"x":4.7661,"y":-43.7026,"group":"group 1"},{"x":7.3663,"y":165.0451,"group":"group 1"},{"x":1.1853,"y":-33.8481,"group":"group 3"},{"x":2.2968,"y":39.4135,"group":"group 1"},{"x":1.0567,"y":-36.5431,"group":"group 1"},{"x":2.3932,"y":13.6117,"group":"group 3"},{"x":2.748,"y":252.4803,"group":"group 3"},{"x":4.7829,"y":-31.7217,"group":"group 1"},{"x":2.3727,"y":-85.6139,"group":"group 2"},{"x":9.0901,"y":264.6788,"group":"group 3"},{"x":9.1755,"y":361.7228,"group":"group 3"},{"x":4.062,"y":68.5985,"group":"group 3"},{"x":9.947,"y":388.0612,"group":"group 1"},{"x":8.5611,"y":273.4273,"group":"group 2"},{"x":3.3715,"y":-6.163,"group":"group 2"},{"x":2.9083,"y":159.5752,"group":"group 1"},{"x":4.9829,"y":3.6874,"group":"group 1"},{"x":8.3529,"y":276.9406,"group":"group 1"},{"x":8.6288,"y":115.8831,"group":"group 3"},{"x":8.9271,"y":301.8939,"group":"group 2"},{"x":0.9099,"y":-93.2433,"group":"group 3"},{"x":5.6969,"y":43.6875,"group":"group 2"},{"x":2.3325,"y":1.4383,"group":"group 1"},{"x":8.9904,"y":298.2119,"group":"group 3"},{"x":0.3279,"y":91.7876,"group":"group 1"},{"x":0.0322,"y":-43.2966,"group":"group 1"},{"x":4.5481,"y":-25.1443,"group":"group 3"},{"x":8.1686,"y":280.2127,"group":"group 1"},{"x":3.7459,"y":131.5106,"group":"group 1"},{"x":9.2308,"y":177.6994,"group":"group 1"},{"x":4.6825,"y":-4.5746,"group":"group 3"},{"x":8.1892,"y":295.403,"group":"group 2"},{"x":4.097,"y":86.5567,"group":"group 3"},{"x":9.8767,"y":231.3989,"group":"group 2"},{"x":7.1523,"y":47.5369,"group":"group 2"},{"x":7.6576,"y":-25.7604,"group":"group 3"},{"x":4.0004,"y":86.5305,"group":"group 1"},{"x":0.925,"y":-25.9616,"group":"group 1"},{"x":9.8013,"y":417.321,"group":"group 2"},{"x":6.5659,"y":137.998,"group":"group 2"},{"x":1.7747,"y":26.5261,"group":"group 2"},{"x":8.2641,"y":220.8199,"group":"group 2"},{"x":5.6889,"y":14.0728,"group":"group 3"},{"x":8.1652,"y":195.2591,"group":"group 1"},{"x":2.7242,"y":13.334,"group":"group 2"},{"x":3.1423,"y":-122.8527,"group":"group 3"},{"x":4.0384,"y":10.0007,"group":"group 3"},{"x":6.5488,"y":151.8752,"group":"group 2"},{"x":3.6779,"y":188.276,"group":"group 2"},{"x":3.2525,"y":-30.4503,"group":"group 2"},{"x":7.8867,"y":197.7038,"group":"group 3"},{"x":8.9217,"y":-19.3019,"group":"group 2"},{"x":2.5967,"y":-40.1165,"group":"group 1"},{"x":1.9159,"y":-128.7216,"group":"group 2"},{"x":0.1983,"y":-62.9792,"group":"group 1"},{"x":7.1654,"y":63.2177,"group":"group 3"},{"x":3.4285,"y":-49.8005,"group":"group 3"},{"x":9.0708,"y":297.2135,"group":"group 2"},{"x":1.2174,"y":107.2814,"group":"group 2"},{"x":3.15,"y":1.7787,"group":"group 3"},{"x":0.0311,"y":-33.8135,"group":"group 1"},{"x":7.5327,"y":104.5062,"group":"group 2"},{"x":7.6486,"y":320.9002,"group":"group 2"},{"x":0.1423,"y":-44.1586,"group":"group 3"},{"x":2.6058,"y":132.226,"group":"group 2"},{"x":0.2502,"y":-2.4986,"group":"group 2"},{"x":5.9122,"y":8.5875,"group":"group 3"},{"x":4.8333,"y":78.773,"group":"group 3"},{"x":8.0771,"y":11.6886,"group":"group 3"},{"x":1.6329,"y":-60.4577,"group":"group 3"},{"x":7.8048,"y":135.9305,"group":"group 3"},{"x":9.9477,"y":401.7237,"group":"group 1"},{"x":4.9924,"y":-123.717,"group":"group 1"},{"x":6.8324,"y":74.2628,"group":"group 1"},{"x":1.6611,"y":16.0797,"group":"group 2"},{"x":2.6426,"y":-41.0248,"group":"group 3"},{"x":1.6662,"y":-168.6713,"group":"group 3"},{"x":6.961,"y":149.366,"group":"group 2"},{"x":9.5289,"y":329.8511,"group":"group 1"},{"x":6.3404,"y":102.2839,"group":"group 2"},{"x":4.2398,"y":-54.2035,"group":"group 2"},{"x":8.2753,"y":57.2134,"group":"group 3"},{"x":5.3239,"y":37.2633,"group":"group 3"},{"x":6.5986,"y":222.8405,"group":"group 3"},{"x":5.469,"y":-105.5784,"group":"group 1"},{"x":9.8452,"y":321.6823,"group":"group 3"},{"x":3.5565,"y":-21.8723,"group":"group 3"},{"x":2.5905,"y":-39.668,"group":"group 1"},{"x":3.6501,"y":138.1454,"group":"group 1"},{"x":0.8663,"y":4.0695,"group":"group 2"},{"x":7.2439,"y":172.0617,"group":"group 3"},{"x":6.4169,"y":97.3631,"group":"group 2"},{"x":7.1427,"y":60.0807,"group":"group 3"},{"x":0.8974,"y":-69.7744,"group":"group 3"},{"x":7.0622,"y":60.9859,"group":"group 1"},{"x":6.9725,"y":182.7215,"group":"group 3"},{"x":0.1846,"y":-77.0495,"group":"group 3"},{"x":8.1576,"y":252.7403,"group":"group 3"},{"x":7.4802,"y":316.9895,"group":"group 1"},{"x":9.5366,"y":231.7284,"group":"group 3"},{"x":9.2443,"y":311.2115,"group":"group 1"},{"x":5.6359,"y":46.4196,"group":"group 1"},{"x":3.2145,"y":-17.0165,"group":"group 1"},{"x":3.7374,"y":111.9737,"group":"group 1"},{"x":5.5718,"y":287.4701,"group":"group 3"},{"x":6.7331,"y":90.2807,"group":"group 1"},{"x":5.933,"y":158.5714,"group":"group 2"},{"x":6.8879,"y":211.8243,"group":"group 2"},{"x":9.7237,"y":275.2952,"group":"group 2"},{"x":4.0329,"y":145.0443,"group":"group 3"},{"x":9.2656,"y":144.0652,"group":"group 3"},{"x":1.459,"y":-154.4802,"group":"group 1"},{"x":5.0881,"y":129.9454,"group":"group 3"},{"x":9.7753,"y":309.5602,"group":"group 2"},{"x":7.9336,"y":221.7583,"group":"group 3"},{"x":8.3659,"y":85.4336,"group":"group 1"},{"x":8.7884,"y":331.2559,"group":"group 2"},{"x":6.5149,"y":85.4318,"group":"group 2"},{"x":7.072,"y":185.3458,"group":"group 2"},{"x":7.9163,"y":47.7905,"group":"group 2"},{"x":5.996,"y":-10.2794,"group":"group 3"},{"x":5.3051,"y":83.4863,"group":"group 1"},{"x":3.4143,"y":126.3259,"group":"group 3"},{"x":9.3504,"y":308.0273,"group":"group 2"},{"x":1.0056,"y":53.0227,"group":"group 2"},{"x":2.4414,"y":18.7573,"group":"group 3"},{"x":5.7477,"y":103.0156,"group":"group 2"},{"x":6.5585,"y":84.444,"group":"group 2"},{"x":3.0886,"y":-6.2268,"group":"group 3"},{"x":2.2458,"y":-42.3138,"group":"group 2"},{"x":9.2159,"y":304.1449,"group":"group 1"},{"x":8.1992,"y":84.2164,"group":"group 3"},{"x":8.3967,"y":151.8024,"group":"group 1"},{"x":2.7174,"y":2.2449,"group":"group 3"},{"x":2.6662,"y":-147.5166,"group":"group 1"},{"x":3.361,"y":100.6867,"group":"group 1"},{"x":6.6522,"y":114.4148,"group":"group 1"},{"x":7.8983,"y":203.6418,"group":"group 1"},{"x":9.5402,"y":387.2282,"group":"group 1"},{"x":9.02,"y":221.3863,"group":"group 1"},{"x":2.8905,"y":-149.4168,"group":"group 3"},{"x":6.4337,"y":178.5885,"group":"group 3"},{"x":1.2528,"y":-126.3733,"group":"group 2"},{"x":6.716,"y":190.3307,"group":"group 2"},{"x":3.2016,"y":-0.217,"group":"group 2"},{"x":6.3493,"y":64.1655,"group":"group 1"},{"x":6.7756,"y":71.4518,"group":"group 1"},{"x":3.9584,"y":22.015,"group":"group 2"},{"x":2.5255,"y":-41.6199,"group":"group 2"},{"x":3.8441,"y":-29.7486,"group":"group 2"},{"x":2.9268,"y":196.3191,"group":"group 2"},{"x":9.1238,"y":120.5815,"group":"group 1"},{"x":9.9184,"y":316.1631,"group":"group 3"},{"x":7.344,"y":31.7727,"group":"group 2"},{"x":4.4159,"y":-47.7652,"group":"group 2"},{"x":9.1224,"y":332.5515,"group":"group 3"},{"x":5.448,"y":178.3089,"group":"group 1"},{"x":0.2991,"y":-76.2689,"group":"group 3"},{"x":2.3714,"y":89.6543,"group":"group 1"},{"x":4.5024,"y":-7.945,"group":"group 2"},{"x":2.3957,"y":-69.329,"group":"group 3"},{"x":8.9532,"y":335.61,"group":"group 3"},{"x":4.8841,"y":65.3812,"group":"group 3"},{"x":1.1689,"y":-26.7797,"group":"group 2"},{"x":7.748,"y":248.8227,"group":"group 1"},{"x":5.3608,"y":181.135,"group":"group 3"},{"x":6.2214,"y":82.6775,"group":"group 3"},{"x":9.863,"y":357.1058,"group":"group 2"},{"x":2.1377,"y":-76.1482,"group":"group 1"},{"x":0.0263,"y":24.3676,"group":"group 2"},{"x":4.4501,"y":-78.9687,"group":"group 3"},{"x":4.3036,"y":-4.1669,"group":"group 3"},{"x":8.1971,"y":180.4675,"group":"group 3"},{"x":6.6497,"y":-50.4289,"group":"group 2"},{"x":5.2635,"y":217.4576,"group":"group 1"},{"x":0.8646,"y":-35.2302,"group":"group 2"},{"x":9.8265,"y":290.5553,"group":"group 2"},{"x":4.2156,"y":-25.8883,"group":"group 1"},{"x":2.0466,"y":64.2717,"group":"group 1"},{"x":8.8054,"y":71.7501,"group":"group 1"},{"x":8.9765,"y":415.6296,"group":"group 2"},{"x":0.9174,"y":11.6958,"group":"group 2"},{"x":3.6496,"y":68.9215,"group":"group 1"},{"x":5.2457,"y":59.4708,"group":"group 2"},{"x":0.4332,"y":51.0574,"group":"group 3"},{"x":7.4452,"y":168.1651,"group":"group 3"},{"x":3.1841,"y":-36.191,"group":"group 1"},{"x":5.575,"y":40.483,"group":"group 2"},{"x":3.2387,"y":68.5785,"group":"group 2"},{"x":8.8642,"y":213.1703,"group":"group 1"},{"x":9.1408,"y":149.0038,"group":"group 3"},{"x":3.7944,"y":-19.1257,"group":"group 1"},{"x":9.0945,"y":310.4959,"group":"group 2"},{"x":2.735,"y":51.9031,"group":"group 1"},{"x":3.1952,"y":124.1522,"group":"group 2"},{"x":2.5225,"y":-14.207,"group":"group 1"},{"x":6.4847,"y":-40.6478,"group":"group 3"},{"x":3.8083,"y":0.2566,"group":"group 2"},{"x":3.011,"y":19.3055,"group":"group 3"},{"x":7.5484,"y":77.6457,"group":"group 3"},{"x":6.653,"y":169.5579,"group":"group 3"},{"x":8.9888,"y":280.4015,"group":"group 1"},{"x":5.7346,"y":-6.7714,"group":"group 1"},{"x":5.9009,"y":125.1055,"group":"group 1"},{"x":9.6559,"y":287.0226,"group":"group 3"},{"x":7.1667,"y":118.2562,"group":"group 3"},{"x":3.1402,"y":87.9427,"group":"group 1"},{"x":0.1679,"y":-64.06,"group":"group 3"},{"x":4.7313,"y":-25.3251,"group":"group 1"},{"x":0.2418,"y":-83.7573,"group":"group 2"},{"x":8.6363,"y":112.7522,"group":"group 3"},{"x":4.8296,"y":198.2495,"group":"group 1"},{"x":7.2969,"y":133.5956,"group":"group 1"},{"x":8.1582,"y":213.5543,"group":"group 3"},{"x":2.52,"y":-115.2981,"group":"group 2"},{"x":9.6986,"y":312.7312,"group":"group 3"},{"x":2.97,"y":37.8801,"group":"group 2"},{"x":1.2905,"y":-111.5205,"group":"group 3"},{"x":4.5277,"y":-20.6765,"group":"group 1"},{"x":0.6193,"y":-119.4391,"group":"group 1"},{"x":0.2232,"y":45.1704,"group":"group 1"},{"x":9.8818,"y":274.826,"group":"group 1"},{"x":1.1684,"y":-136.1441,"group":"group 2"},{"x":6.9349,"y":73.2017,"group":"group 2"},{"x":7.5617,"y":96.0936,"group":"group 1"},{"x":4.6381,"y":1.7014,"group":"group 3"},{"x":7.8562,"y":264.6896,"group":"group 1"},{"x":9.7966,"y":351.2419,"group":"group 2"},{"x":4.1964,"y":-7.577,"group":"group 1"},{"x":6.4329,"y":139.2896,"group":"group 3"},{"x":4.2551,"y":120.8192,"group":"group 3"},{"x":9.5846,"y":368.413,"group":"group 1"},{"x":5.0639,"y":111.2266,"group":"group 2"},{"x":2.3058,"y":-28.4047,"group":"group 1"},{"x":4.8919,"y":1.3067,"group":"group 2"},{"x":5.6095,"y":25.9533,"group":"group 2"},{"x":1.6024,"y":114.7654,"group":"group 1"},{"x":1.5271,"y":-86.2338,"group":"group 1"},{"x":9.1535,"y":224.0281,"group":"group 1"}];
    </script>
<p>Now our data is inside our page’s javascript scope and ready to be played with!</p>
</div>
<div id="drawing-pretty-pictures" class="section level2">
<h2>Drawing pretty pictures</h2>
<p>Let’s make a super simple d3 scatter plot to see this randomly generated data. All I have to do is include my desired javascript libraries, make a <code>div</code> element for my visualization to go into and then put my <code>{js}</code> block in. RMarkdown will slot the javascript into the page and we’re good to go.</p>
<p>In this example I did…</p>
<pre><code>&lt;script src=&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://d3js.org/d3.v4.min.js&quot;&gt;&lt;/script&gt;

&lt;div id = &quot;viz&quot;&gt;&lt;/div&gt; 

` ` `{js}
//code goes here
` ` `</code></pre>
</div>
<div id="did-it-work" class="section level2">
<h2>Did it work?</h2>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<div id="viz">

</div>
<script type="text/javascript">
var point_vals = d3.select("#viz").append("p").text("Mouseover some data!");

//Get how wide our page is in pixels so we can draw our plot in it
var page_width = $("#did-it-work").width();
  
// set the dimensions and margins of the graph
var margin = 20,
    width = page_width - 2*margin,
    height = page_width*0.8 - 2*margin;
    
// Find max data values
var x_extent = d3.extent(data, d => d.x);
var y_extent = d3.extent(data, d => d.y);

// Set the scales 
var x = d3.scaleLinear()
  .domain(x_extent)
  .range([0, width]);
  
var y = d3.scaleLinear()
  .domain(y_extent)
  .range([height, 0]);

//Set up our SVG element
var svg = d3.select("#viz").append("svg")
    .attr("width", width + 2*margin)
    .attr("height", height + 2*margin)
  .append("g")
    .attr("transform",
          "translate(" + margin + "," + margin + ")");

var bounce_select = d3.transition()
    .duration(1000)
    .ease(d3.easeElastic.period(0.4));
    
// Add the scatterplot
svg.selectAll(".dots")
    .data(data)
  .enter().append("circle")
    .attr("class", "dots")
    .attr("fill", d => d.group === "group 1"? "steelblue":"orangered")
    .attr("fill-opacity", 0.3)
    .attr("r", 5)
    .attr("cx", d => x(d.x) )
    .attr("cy", d => y(d.y) )
    .on("mouseover", function(d){
       d3.selectAll(".dots").attr("r", 5) //make sure all the dots are small
       d3.select(this)
        .transition(bounce_select)
        .attr("r", 10);
      
       point_vals.text("X:" + d.x + " Y:" + d.y) //change the title of the graph to the datapoint
    });
    
// Draw the axes    
// Add the X Axis
svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

// Add the Y Axis
svg.append("g")
    .call(d3.axisLeft(y));
</script>
</div>
<div id="why-when" class="section level2">
<h2>Why/ When</h2>
<p>This is a bad example of a visualization for this scenario as something like plotly could do this in much less effort. If you’re doing something more complicated/ bespoke then this is a great resource to have.</p>
</div>
<div id="addendum" class="section level2">
<h2>Addendum</h2>
<p>If you’re interested, here’s the javascript code I included to make the above graph.</p>
<pre><code>var point_vals = d3.select(&quot;#viz&quot;).append(&quot;p&quot;).text(&quot;Mouseover some data!&quot;);

//Get how wide our page is in pixels so we can draw our plot in it
var page_width = $(&quot;#did-it-work&quot;).width();
  
// set the dimensions and margins of the graph
var margin = 20,
    width = page_width - 2*margin,
    height = page_width*0.8 - 2*margin;
    
// Find max data values
var x_extent = d3.extent(data, d =&gt; d.x);
var y_extent = d3.extent(data, d =&gt; d.y);

// Set the scales 
var x = d3.scaleLinear()
  .domain(x_extent)
  .range([0, width]);
  
var y = d3.scaleLinear()
  .domain(y_extent)
  .range([height, 0]);

//Set up our SVG element
var svg = d3.select(&quot;#viz&quot;).append(&quot;svg&quot;)
    .attr(&quot;width&quot;, width + 2*margin)
    .attr(&quot;height&quot;, height + 2*margin)
  .append(&quot;g&quot;)
    .attr(&quot;transform&quot;,
          &quot;translate(&quot; + margin + &quot;,&quot; + margin + &quot;)&quot;);

var bounce_select = d3.transition()
    .duration(1000)
    .ease(d3.easeElastic.period(0.4));
    
// Add the scatterplot
svg.selectAll(&quot;.dots&quot;)
    .data(data)
  .enter().append(&quot;circle&quot;)
    .attr(&quot;class&quot;, &quot;dots&quot;)
    .attr(&quot;fill&quot;, d =&gt; d.group === &quot;group 1&quot;? &quot;steelblue&quot;:&quot;orangered&quot;)
    .attr(&quot;fill-opacity&quot;, 0.3)
    .attr(&quot;r&quot;, 5)
    .attr(&quot;cx&quot;, d =&gt; x(d.x) )
    .attr(&quot;cy&quot;, d =&gt; y(d.y) )
    .on(&quot;mouseover&quot;, function(d){
       d3.selectAll(&quot;.dots&quot;).attr(&quot;r&quot;, 5) //make sure all the dots are small
       d3.select(this)
        .transition(bounce_select)
        .attr(&quot;r&quot;, 10);
      
       point_vals.text(&quot;X:&quot; + d.x + &quot; Y:&quot; + d.y) //change the title of the graph to the datapoint
    });
    
// Draw the axes    
// Add the X Axis
svg.append(&quot;g&quot;)
    .attr(&quot;transform&quot;, &quot;translate(0,&quot; + height + &quot;)&quot;)
    .call(d3.axisBottom(x));

// Add the Y Axis
svg.append(&quot;g&quot;)
    .call(d3.axisLeft(y));</code></pre>
</div>




    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="../../../../" style="background-image: url(/images/logo.png)"><span class="hidden">'s Picture</span></a>
    </figure>
    

    








<div class="post-author">

    <img style = "border-radius: 25px;" src="https://avatars0.githubusercontent.com/u/6764693?v=3&amp;u=c9c491a636605fe3d6122defb43eb367b3d9381f&amp;s=400" alt="Nick Strayer image" width="90" height="90">
    <br>
    <span style="font-size: 1.02em;font-weight: bold;">
        Nick Strayer
    </span>
    |
    <a style = "text-decoration: none;" class = "post-author__text" href = http://nickstrayer.me >
        <img style="width:20px;" src = "http://image.flaticon.com/icons/png/128/12/12195.png"/>
    </a>

    <a class="icon-twitter post-author__text" style="font-size: 1.4em; text-decoration: none;" href = https://twitter.com/NicholasStrayer onclick="window.open(this.href"></a>

    <a style = "text-decoration: none;" class = "post-author__text" href = https://github.com/nstrayer >
        <img style="width:23px;" src = "https://a248.e.akamai.net/assets.github.com/images/icons/emoji/octocat.png"/>
    </a>


    <br>

    <p class="post-author__text">Randomly walking my way though a career in statistics</p>
    


    
<section class="share">
  <p style="font-size: 1em; font-weight:bold;">Share this post <a class="icon-twitter" style="font-size: 1.1em" href="https://twitter.com/share?text=Custom%20JavaScript%20Visualizations%20in%20RMarkdown&nbsp;-&nbsp;Live%20Free%20or%20Dichotomize&amp;url=https://livefreeordichotomize.com%2f2017%2f01%2f24%2fcustom-javascript-visualizations-in-rmarkdown%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
 </a></p>
</section>



    




  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Live Free or Dichotomize</a> </section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="../../../../js/jquery.js"></script>
    <script type="text/javascript" src="../../../../js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="../../../../js/index.js"></script>
    
</body>
</html>

