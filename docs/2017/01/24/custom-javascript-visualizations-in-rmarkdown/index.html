<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    


    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Custom JavaScript Visualizations in RMarkdown"/>
<meta name="twitter:description" content="I happened to stumble upon the preview release page for RStudio recently and noticed something that made me exorbitantly happy.
 A preview release of RStudio v1.0.136 is now available for testing and feedback. This release includes… Support for JavaScript and CSS chunks in R Notebooks…
 “Support for JavaScript and CSS chunks in R Notebooks”! As someone who loves using javascript for plotting (and secretly for manipulating) data this is massively exciting."/>



  	<meta property="og:title" content=" Custom JavaScript Visualizations in RMarkdown &middot;  Live Free or Dichotomize" />
  	<meta property="og:site_name" content="Live Free or Dichotomize" />
  	<meta property="og:url" content="/2017/01/24/custom-javascript-visualizations-in-rmarkdown/" />

    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2017-01-24T10:54:24&#43;02:00" />

    
    <meta property="og:article:tag" content="javascript" />
    
    <meta property="og:article:tag" content="visualization" />
    
    

    <title>
       Custom JavaScript Visualizations in RMarkdown &middot;  Live Free or Dichotomize
    </title>

    <meta name="description" content="A statistics blog from two goofy Phd students." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="../../../../images/favicon.ico">
	  <link rel="apple-touch-icon" href="../../../../images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="../../../../css/screen.css" />
    <link rel="stylesheet" type="text/css" href="../../../../css/nav.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="../../../../index.xml" rel="alternate" type="application/rss+xml" title="Live Free or Dichotomize" />
      
      
    
    <meta name="generator" content="Hugo 0.18.1" />

    <link rel="canonical" href="../../../../2017/01/24/custom-javascript-visualizations-in-rmarkdown/" />

    

    






</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="../../../../about/">About</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://github.com/lfod/blog">GitHub</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://twitter.com/LucyStats">Lucy&#39;s Twitter</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://twitter.com/NickStrayer">Nick&#39;s Twitter</a>
            </li>
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="../../../../index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
      <a class="blog-logo" href="../../../../"><img src="../../../../images/logo.png" alt="Home" /></a>
  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Custom JavaScript Visualizations in RMarkdown</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2017-01-24T10:54:24&#43;02:00">
            Jan 24, 2017
          </time>
        
         
          <span class="post-tag small"><a href="../../../../tags/javascript/">#javascript</a></span>
         
          <span class="post-tag small"><a href="../../../../tags/visualization/">#visualization</a></span>
         
        </section>
    </header>

    <section class="post-content">


<p>I happened to stumble upon the <a href="https://www.rstudio.com/products/rstudio/download/preview/">preview release page</a> for RStudio recently and noticed something that made me exorbitantly happy.</p>
<blockquote>
<p>A preview release of RStudio v1.0.136 is now available for testing and feedback. This release includes… Support for JavaScript and CSS chunks in R Notebooks…</p>
</blockquote>
<p><em>“Support for JavaScript and CSS chunks in R Notebooks”</em>! As someone who loves using javascript for plotting (and secretly for manipulating) data this is massively exciting. Previously my workflow for generating an interactive graphic would be something like:</p>
<ul>
<li>Download data</li>
<li>Clean data and do preliminary visualization in R</li>
<li>Export what I liked to a csv file and make a new directory with a set of <code>.html, .js, .css</code> files in it.</li>
<li>Load data into javascript/d3.js in the new javascript file.</li>
<li>Plot.</li>
</ul>
<p>This workflow has served me very well, I did it probably 20 times a day when working at the New York Times and I am very fast with it. If you want to just make a stand alone visualization it’s fantastic, however, as a biostatistician who works with a lot of other biostatisticians, people tend to want to see where the data comes from.</p>
<p>With Javascript chunks in <code>.Rmd</code> files you can explicitly show the code for data gathering/cleaning etc. in a language that your collaborators can understand, along with making custom d3 charts with that data. All without ever leaving RStudio. I will show you my quick and dirty solution to doing so.</p>
<div id="getting-data-into-javascript" class="section level2">
<h2>Getting data into Javascript</h2>
<p>Instead of generating a csv file in R and then loading that into javascript we will instead send the data directly through the html to javascript. (<em>Note:</em> This wont work well with super large data).</p>
<p>Inspired by <a href="https://medium.com/@becausealice2/getting-r-and-d3-js-to-play-nicely-in-r-markdown-270e302a52d3#.772g93eb3">this</a> medium post I wrote a little function that takes a dataframe and sends it to the html document in the <code>.json</code> format.</p>
<pre class="r"><code>library(tidyverse)
library(jsonlite)

send_df_to_js &lt;- function(df){
  cat(
    paste(
    &#39;&lt;script&gt;
      var data = &#39;,toJSON(df),&#39;;
    &lt;/script&gt;&#39;
    , sep=&quot;&quot;)
  )
}</code></pre>
<p>To illustrate how it works we will generate some random data into a dataframe.</p>
<pre class="r"><code>#Generate some random x and y data to plot
n &lt;- 300
random_data &lt;- data_frame(x = runif(n)*10) %&gt;% 
  mutate(y = 0.5*x^3 - 1.3*x^2 + rnorm(n, mean = 0, sd = 80),
         group = paste(&quot;group&quot;, sample(c(1,2,3), n, replace = T)))</code></pre>
<p>Now we send a snippit of the dataframe into the function to see the output…</p>
<pre class="r"><code>random_data %&gt;% 
  head() %&gt;% 
  send_df_to_js()</code></pre>
<pre><code>## &lt;script&gt;
##       var data = [{&quot;x&quot;:8.6669,&quot;y&quot;:394.0166,&quot;group&quot;:&quot;group 1&quot;},{&quot;x&quot;:2.7642,&quot;y&quot;:-111.1789,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:2.4007,&quot;y&quot;:-68.8392,&quot;group&quot;:&quot;group 1&quot;},{&quot;x&quot;:5.3425,&quot;y&quot;:68.5745,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:8.4944,&quot;y&quot;:300.47,&quot;group&quot;:&quot;group 3&quot;},{&quot;x&quot;:0.7149,&quot;y&quot;:-22.7415,&quot;group&quot;:&quot;group 2&quot;}];
##     &lt;/script&gt;</code></pre>
<p>Beautiful, we have our data, in <code>json</code> format, wrapped in a script tag. Now we can send the whole dataframe through. This time I am using the <code>results = &quot;asis&quot;</code> option in the code chunk (<code>{r, results = &quot;asis&quot;}</code>), to write the results directly to the html document and not to the output like we did above.</p>
<pre class="r"><code>#Initiate data transfer protocol one
send_df_to_js(random_data)</code></pre>
<script>
      var data = [{"x":8.6669,"y":394.0166,"group":"group 1"},{"x":2.7642,"y":-111.1789,"group":"group 2"},{"x":2.4007,"y":-68.8392,"group":"group 1"},{"x":5.3425,"y":68.5745,"group":"group 2"},{"x":8.4944,"y":300.47,"group":"group 3"},{"x":0.7149,"y":-22.7415,"group":"group 2"},{"x":4.6545,"y":33.5914,"group":"group 1"},{"x":9.9172,"y":320.4479,"group":"group 2"},{"x":3.1358,"y":110.1833,"group":"group 3"},{"x":0.8852,"y":38.3114,"group":"group 1"},{"x":2.705,"y":-26.447,"group":"group 3"},{"x":5.0194,"y":-8.1024,"group":"group 2"},{"x":1.722,"y":-93.6821,"group":"group 1"},{"x":1.4534,"y":-41.4203,"group":"group 1"},{"x":7.1238,"y":184.0845,"group":"group 2"},{"x":3.1566,"y":75.0244,"group":"group 2"},{"x":6.822,"y":64.6556,"group":"group 2"},{"x":6.4651,"y":-12.5994,"group":"group 1"},{"x":0.9249,"y":-36.3125,"group":"group 1"},{"x":9.2083,"y":176.4866,"group":"group 2"},{"x":6.4147,"y":-5.7793,"group":"group 1"},{"x":3.0818,"y":32.763,"group":"group 3"},{"x":3.3222,"y":80.5913,"group":"group 3"},{"x":0.5928,"y":111.5346,"group":"group 1"},{"x":0.0187,"y":-34.8616,"group":"group 3"},{"x":2.0205,"y":-120.9726,"group":"group 2"},{"x":1.995,"y":27.5269,"group":"group 3"},{"x":0.0137,"y":68.1951,"group":"group 2"},{"x":7.8127,"y":204.3198,"group":"group 1"},{"x":3.1533,"y":12.6691,"group":"group 2"},{"x":7.7694,"y":136.4848,"group":"group 3"},{"x":7.9137,"y":133.1774,"group":"group 2"},{"x":0.4002,"y":-119.5369,"group":"group 3"},{"x":5.9987,"y":44.2454,"group":"group 2"},{"x":7.0145,"y":86.2724,"group":"group 3"},{"x":7.5099,"y":107.5436,"group":"group 2"},{"x":5.1492,"y":36.5269,"group":"group 3"},{"x":8.0318,"y":232.1102,"group":"group 3"},{"x":9.8197,"y":374.196,"group":"group 3"},{"x":0.1858,"y":-96.3216,"group":"group 3"},{"x":1.9816,"y":120.1914,"group":"group 3"},{"x":0.4222,"y":-60.8416,"group":"group 3"},{"x":9.9647,"y":296.7632,"group":"group 3"},{"x":9.6837,"y":280.0129,"group":"group 1"},{"x":5.872,"y":60.9881,"group":"group 2"},{"x":5.6866,"y":49.6855,"group":"group 2"},{"x":8.1688,"y":83.9556,"group":"group 3"},{"x":3.3974,"y":4.6751,"group":"group 1"},{"x":1.6907,"y":-45.5316,"group":"group 2"},{"x":8.9269,"y":182.6178,"group":"group 3"},{"x":9.846,"y":313.3796,"group":"group 3"},{"x":4.3572,"y":37.8214,"group":"group 2"},{"x":0.2098,"y":-140.5061,"group":"group 2"},{"x":3.5466,"y":-78.8236,"group":"group 2"},{"x":9.2014,"y":397.8535,"group":"group 2"},{"x":5.3238,"y":-110.247,"group":"group 3"},{"x":1.1783,"y":-93.6202,"group":"group 1"},{"x":7.7154,"y":154.9426,"group":"group 1"},{"x":3.5184,"y":43.2236,"group":"group 1"},{"x":7.3781,"y":186.5253,"group":"group 2"},{"x":0.6847,"y":51.6164,"group":"group 1"},{"x":9.6853,"y":356.4135,"group":"group 3"},{"x":5.4426,"y":56.6247,"group":"group 3"},{"x":5.8041,"y":-43.0737,"group":"group 3"},{"x":8.1614,"y":136.6233,"group":"group 2"},{"x":7.0113,"y":105.2294,"group":"group 1"},{"x":0.1521,"y":60.7257,"group":"group 1"},{"x":6.8317,"y":21.3005,"group":"group 2"},{"x":8.5937,"y":179.1683,"group":"group 2"},{"x":0.8538,"y":-67.0308,"group":"group 3"},{"x":3.6954,"y":50.1548,"group":"group 3"},{"x":7.7401,"y":213.9911,"group":"group 2"},{"x":4.9521,"y":-29.9316,"group":"group 1"},{"x":0.5739,"y":-79.0018,"group":"group 1"},{"x":8.3911,"y":321.0075,"group":"group 1"},{"x":4.4265,"y":42.2303,"group":"group 3"},{"x":3.124,"y":44.2494,"group":"group 1"},{"x":5.4326,"y":134.9388,"group":"group 3"},{"x":5.2694,"y":-59.4032,"group":"group 1"},{"x":9.6509,"y":316.8341,"group":"group 3"},{"x":1.7385,"y":-62.0095,"group":"group 1"},{"x":1.8362,"y":41.9912,"group":"group 2"},{"x":0.9517,"y":-55.2459,"group":"group 1"},{"x":0.4063,"y":-96.7013,"group":"group 1"},{"x":6.9448,"y":166.433,"group":"group 1"},{"x":7.8126,"y":145.8128,"group":"group 2"},{"x":6.9042,"y":-78.5334,"group":"group 2"},{"x":3.7886,"y":-74.2198,"group":"group 2"},{"x":9.9801,"y":324.3074,"group":"group 3"},{"x":2.9227,"y":62.8468,"group":"group 2"},{"x":5.3812,"y":58.8299,"group":"group 2"},{"x":5.3291,"y":-34.3829,"group":"group 2"},{"x":0.5418,"y":-123.7495,"group":"group 2"},{"x":3.5868,"y":18.9224,"group":"group 3"},{"x":1.2051,"y":-82.654,"group":"group 2"},{"x":5.2395,"y":96.7398,"group":"group 2"},{"x":3.9383,"y":-55.3149,"group":"group 1"},{"x":3.6129,"y":-89.1767,"group":"group 1"},{"x":9.5536,"y":227.9194,"group":"group 1"},{"x":1.7217,"y":43.0789,"group":"group 1"},{"x":1.0321,"y":-104.2499,"group":"group 2"},{"x":2.7781,"y":-17.8537,"group":"group 1"},{"x":1.5609,"y":20.3819,"group":"group 2"},{"x":6.7492,"y":31.4729,"group":"group 3"},{"x":5.6204,"y":102.1011,"group":"group 3"},{"x":8.0712,"y":280.3489,"group":"group 2"},{"x":1.3318,"y":99.9381,"group":"group 3"},{"x":6.274,"y":153.55,"group":"group 2"},{"x":4.184,"y":74.6352,"group":"group 1"},{"x":8.1248,"y":233.6123,"group":"group 1"},{"x":9.6098,"y":380.0373,"group":"group 2"},{"x":3.841,"y":-40.6462,"group":"group 1"},{"x":5.6761,"y":287.5343,"group":"group 3"},{"x":8.3592,"y":313.4565,"group":"group 3"},{"x":5.904,"y":106.9484,"group":"group 2"},{"x":2.9538,"y":-35.485,"group":"group 1"},{"x":7.6834,"y":114.0946,"group":"group 2"},{"x":8.9273,"y":310.0699,"group":"group 3"},{"x":7.2897,"y":176.5631,"group":"group 3"},{"x":7.5743,"y":251.432,"group":"group 2"},{"x":3.7874,"y":47.8984,"group":"group 2"},{"x":2.556,"y":-123.6796,"group":"group 3"},{"x":2.1096,"y":193.7865,"group":"group 2"},{"x":2.3435,"y":28.9171,"group":"group 3"},{"x":9.2286,"y":352.436,"group":"group 3"},{"x":8.6444,"y":120.7432,"group":"group 2"},{"x":8.3872,"y":285.9595,"group":"group 3"},{"x":9.7326,"y":262.1825,"group":"group 2"},{"x":3.5489,"y":-74.6271,"group":"group 1"},{"x":7.7076,"y":158.2937,"group":"group 2"},{"x":2.4954,"y":47.3483,"group":"group 3"},{"x":7.606,"y":70.483,"group":"group 3"},{"x":9.6363,"y":281.8685,"group":"group 3"},{"x":8.7591,"y":163.4709,"group":"group 1"},{"x":5.3149,"y":-17.4883,"group":"group 2"},{"x":3.0157,"y":20.3799,"group":"group 2"},{"x":4.5013,"y":95.2598,"group":"group 3"},{"x":2.7656,"y":-89.8176,"group":"group 2"},{"x":1.8501,"y":-65.1483,"group":"group 3"},{"x":6.9589,"y":152.5921,"group":"group 1"},{"x":7.3121,"y":112.5524,"group":"group 2"},{"x":0.6151,"y":-22.1231,"group":"group 1"},{"x":7.0298,"y":139.7183,"group":"group 1"},{"x":1.9851,"y":-51.9026,"group":"group 1"},{"x":7.4608,"y":200.4613,"group":"group 2"},{"x":5.9698,"y":54.0193,"group":"group 1"},{"x":8.1352,"y":214.1755,"group":"group 1"},{"x":7.4673,"y":203.4615,"group":"group 2"},{"x":1.577,"y":66.1833,"group":"group 2"},{"x":4.1229,"y":-59.0888,"group":"group 3"},{"x":5.9893,"y":-121.4593,"group":"group 1"},{"x":5.8159,"y":65.7826,"group":"group 2"},{"x":6.8174,"y":76.9456,"group":"group 3"},{"x":5.537,"y":1.6929,"group":"group 3"},{"x":4.2254,"y":88.8805,"group":"group 3"},{"x":7.2216,"y":86.8964,"group":"group 1"},{"x":0.6568,"y":-6.2227,"group":"group 1"},{"x":9.5417,"y":194.1549,"group":"group 3"},{"x":7.7685,"y":103.2942,"group":"group 1"},{"x":7.5509,"y":189.8379,"group":"group 1"},{"x":3.562,"y":125.0726,"group":"group 1"},{"x":6.6361,"y":138.4721,"group":"group 1"},{"x":2.5676,"y":-67.7091,"group":"group 2"},{"x":3.8023,"y":-38.1838,"group":"group 1"},{"x":0.5531,"y":-64.0742,"group":"group 2"},{"x":9.6064,"y":232.8517,"group":"group 2"},{"x":0.1253,"y":-83.1021,"group":"group 3"},{"x":3.3656,"y":29.9366,"group":"group 2"},{"x":0.3929,"y":-99.0663,"group":"group 2"},{"x":6.6923,"y":55.2824,"group":"group 3"},{"x":6.6548,"y":32.1562,"group":"group 3"},{"x":4.9136,"y":21.3609,"group":"group 1"},{"x":8.7498,"y":291.3863,"group":"group 2"},{"x":9.602,"y":444.3942,"group":"group 2"},{"x":7.8983,"y":143.8308,"group":"group 2"},{"x":4.4133,"y":30.1797,"group":"group 2"},{"x":2.5317,"y":-18.866,"group":"group 1"},{"x":1.8841,"y":-80.3514,"group":"group 1"},{"x":5.2954,"y":-21.5749,"group":"group 2"},{"x":8.4778,"y":202.4144,"group":"group 2"},{"x":2.4115,"y":179.9452,"group":"group 1"},{"x":1.8668,"y":24.4384,"group":"group 3"},{"x":0.0482,"y":81.8487,"group":"group 2"},{"x":9.2141,"y":345.3875,"group":"group 2"},{"x":7.8475,"y":121.8019,"group":"group 3"},{"x":3.354,"y":193.6285,"group":"group 2"},{"x":7.0222,"y":183.4492,"group":"group 1"},{"x":5.7895,"y":232.6575,"group":"group 1"},{"x":6.3932,"y":49.0869,"group":"group 3"},{"x":1.3047,"y":22.2785,"group":"group 2"},{"x":0.1483,"y":-88.8887,"group":"group 3"},{"x":2.7042,"y":95.5784,"group":"group 1"},{"x":4.0159,"y":202.909,"group":"group 2"},{"x":2.252,"y":33.9542,"group":"group 2"},{"x":9.8439,"y":329.3039,"group":"group 3"},{"x":0.5842,"y":41.6744,"group":"group 3"},{"x":3.9461,"y":11.6068,"group":"group 1"},{"x":9.5326,"y":370.8197,"group":"group 2"},{"x":6.467,"y":73.1608,"group":"group 2"},{"x":2.201,"y":-72.2829,"group":"group 3"},{"x":1.448,"y":-20.7592,"group":"group 1"},{"x":0.9105,"y":-79.0158,"group":"group 3"},{"x":2.7077,"y":18.6797,"group":"group 2"},{"x":2.2614,"y":-1.1341,"group":"group 2"},{"x":7.0399,"y":148.8288,"group":"group 2"},{"x":4.0964,"y":83.0141,"group":"group 3"},{"x":2.4658,"y":-66.0736,"group":"group 1"},{"x":9.0087,"y":275.7611,"group":"group 2"},{"x":4.5427,"y":126.8269,"group":"group 1"},{"x":1.0593,"y":52.5996,"group":"group 2"},{"x":4.7805,"y":-43.6612,"group":"group 1"},{"x":6.8153,"y":99.9138,"group":"group 3"},{"x":0.8225,"y":40.0916,"group":"group 3"},{"x":8.5006,"y":256.8631,"group":"group 3"},{"x":6.822,"y":148.8179,"group":"group 2"},{"x":6.0405,"y":37.2424,"group":"group 1"},{"x":4.6458,"y":153.0681,"group":"group 3"},{"x":2.2381,"y":9.4371,"group":"group 2"},{"x":3.3112,"y":-32.8687,"group":"group 1"},{"x":2.3921,"y":98.6136,"group":"group 2"},{"x":6.7202,"y":-26.89,"group":"group 3"},{"x":7.272,"y":191.9713,"group":"group 1"},{"x":8.4454,"y":184.0757,"group":"group 1"},{"x":5.5907,"y":-10.277,"group":"group 1"},{"x":5.374,"y":27.8721,"group":"group 2"},{"x":7.4206,"y":193.3632,"group":"group 2"},{"x":5.0482,"y":160.7977,"group":"group 2"},{"x":3.6473,"y":-21.2931,"group":"group 1"},{"x":3.769,"y":76.6967,"group":"group 1"},{"x":4.838,"y":-90.4866,"group":"group 1"},{"x":7.6611,"y":166.2326,"group":"group 1"},{"x":3.9167,"y":-63.0279,"group":"group 2"},{"x":8.8046,"y":297.0913,"group":"group 2"},{"x":0.6864,"y":-23.0766,"group":"group 2"},{"x":2.6,"y":-74.3898,"group":"group 3"},{"x":8.0003,"y":219.115,"group":"group 1"},{"x":5.1233,"y":-158.4159,"group":"group 3"},{"x":2.2072,"y":-178.5441,"group":"group 2"},{"x":0.709,"y":92.4997,"group":"group 2"},{"x":7.6372,"y":206.0712,"group":"group 2"},{"x":3.1293,"y":122.0398,"group":"group 1"},{"x":3.1006,"y":-47.5407,"group":"group 2"},{"x":3.1671,"y":136.9969,"group":"group 3"},{"x":8.3652,"y":227.0572,"group":"group 2"},{"x":1.7955,"y":29.6686,"group":"group 1"},{"x":3.2938,"y":4.58,"group":"group 3"},{"x":1.132,"y":-49.3921,"group":"group 2"},{"x":2.9619,"y":36.9792,"group":"group 1"},{"x":0.1775,"y":35.8571,"group":"group 1"},{"x":2.5508,"y":24.7326,"group":"group 1"},{"x":7.5366,"y":99.0566,"group":"group 3"},{"x":1.5821,"y":-49.9576,"group":"group 2"},{"x":3.1233,"y":-16.1116,"group":"group 2"},{"x":4.1569,"y":8.0077,"group":"group 1"},{"x":5.3661,"y":61.7792,"group":"group 3"},{"x":1.7316,"y":-37.9105,"group":"group 1"},{"x":8.0785,"y":215.1903,"group":"group 2"},{"x":1.987,"y":110.0966,"group":"group 3"},{"x":0.2468,"y":18.142,"group":"group 2"},{"x":5.6588,"y":92.5979,"group":"group 2"},{"x":2.1851,"y":-156.8985,"group":"group 1"},{"x":2.3279,"y":-48.8255,"group":"group 2"},{"x":1.5496,"y":0.7388,"group":"group 2"},{"x":6.521,"y":-45.8797,"group":"group 3"},{"x":5.3448,"y":44.9177,"group":"group 2"},{"x":9.4676,"y":303.1485,"group":"group 3"},{"x":5.7855,"y":114.6199,"group":"group 2"},{"x":2.9698,"y":23.1059,"group":"group 2"},{"x":7.825,"y":188.0787,"group":"group 1"},{"x":5.8157,"y":49.9804,"group":"group 1"},{"x":1.9431,"y":-129.9462,"group":"group 3"},{"x":5.8343,"y":132.7119,"group":"group 2"},{"x":1.212,"y":49.569,"group":"group 3"},{"x":6.9683,"y":44.7434,"group":"group 2"},{"x":9.1999,"y":181.3534,"group":"group 2"},{"x":9.3903,"y":263.6194,"group":"group 2"},{"x":2.4728,"y":-19.7022,"group":"group 1"},{"x":5.5342,"y":23.866,"group":"group 1"},{"x":9.5835,"y":426.0405,"group":"group 1"},{"x":5.7049,"y":198.6647,"group":"group 3"},{"x":9.9968,"y":326.2817,"group":"group 2"},{"x":3.6004,"y":3.8902,"group":"group 1"},{"x":8.3767,"y":124.7322,"group":"group 1"},{"x":2.1675,"y":78.4132,"group":"group 1"},{"x":1.6305,"y":-41.7469,"group":"group 2"},{"x":7.6666,"y":64.1009,"group":"group 1"},{"x":1.3161,"y":-22.006,"group":"group 2"},{"x":3.7787,"y":-6.9856,"group":"group 1"},{"x":1.0169,"y":8.2316,"group":"group 3"},{"x":8.0817,"y":215.2442,"group":"group 3"},{"x":7.2595,"y":120.6255,"group":"group 2"},{"x":0.343,"y":-20.2161,"group":"group 3"},{"x":1.4735,"y":-39.2857,"group":"group 1"},{"x":3.1647,"y":-56.801,"group":"group 1"},{"x":9.9907,"y":434.5427,"group":"group 2"},{"x":2.0465,"y":-128.9994,"group":"group 3"},{"x":7.8461,"y":76.9516,"group":"group 2"},{"x":3.6256,"y":-68.8632,"group":"group 3"},{"x":2.7891,"y":84.0773,"group":"group 3"},{"x":3.3709,"y":155.153,"group":"group 2"}];
    </script>
<p>Now our data is inside our page’s javascript scope and ready to be played with!</p>
</div>
<div id="drawing-pretty-pictures" class="section level2">
<h2>Drawing pretty pictures</h2>
<p>Let’s make a super simple d3 scatter plot to see this randomly generated data. All I have to do is include my desired javascript libraries, make a <code>div</code> element for my visualization to go into and then put my <code>{js}</code> block in. RMarkdown will slot the javascript into the page and we’re good to go.</p>
<p>In this example I did…</p>
<pre><code>&lt;script src=&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://d3js.org/d3.v4.min.js&quot;&gt;&lt;/script&gt;

&lt;div id = &quot;viz&quot;&gt;&lt;/div&gt; 

` ` `{js}
//code goes here
` ` `</code></pre>
</div>
<div id="did-it-work" class="section level2">
<h2>Did it work?</h2>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<div id="viz">

</div>
<script type="text/javascript">
var point_vals = d3.select("#viz")
  .append("p")
  .attr("align", "center")
  .text("Mouseover some data!");

//Get how wide our page is in pixels so we can draw our plot in it
var page_width = $("#did-it-work").width();
  
// set the dimensions and margins of the graph
var margin = 20,
    width = page_width - 2*margin,
    height = page_width*0.8 - 2*margin;
    
// Find max data values
var x_extent = d3.extent(data, d => d.x);
var y_extent = d3.extent(data, d => d.y);

// Set the scales 
var x = d3.scaleLinear()
  .domain(x_extent)
  .range([0, width]);
  
var y = d3.scaleLinear()
  .domain(y_extent)
  .range([height, 0]);

//Set up our SVG element
var svg = d3.select("#viz").append("svg")
    .attr("width", width + 2*margin)
    .attr("height", height + 2*margin)
  .append("g")
    .attr("transform",
          "translate(" + margin + "," + margin + ")");

var bounce_select = d3.transition()
    .duration(1000)
    .ease(d3.easeElastic.period(0.4));
    
// Add the scatterplot
svg.selectAll(".dots")
    .data(data)
  .enter().append("circle")
    .attr("class", "dots")
    .attr("fill", d => d.group === "group 1"? "steelblue":"orangered")
    .attr("fill-opacity", 0.3)
    .attr("r", 5)
    .attr("cx", d => x(d.x) )
    .attr("cy", d => y(d.y) )
    .on("mouseover", function(d){
       d3.selectAll(".dots").attr("r", 5) //make sure all the dots are small
       d3.select(this)
        .transition(bounce_select)
        .attr("r", 10);
      
       point_vals.text("X:" + d.x + " Y:" + d.y) //change the title of the graph to the datapoint
    });
    
// Draw the axes    
// Add the X Axis
svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

// Add the Y Axis
svg.append("g")
    .call(d3.axisLeft(y));
</script>
</div>
<div id="why-when" class="section level2">
<h2>Why/ When</h2>
<p>This is a bad example of a visualization for this scenario as something like plotly could do this in much less effort. If you’re doing something more complicated/ bespoke then this is a great resource to have.</p>
</div>
<div id="addendum" class="section level2">
<h2>Addendum</h2>
<p>If you’re interested, here’s the javascript code I included to make the above graph.</p>
<pre><code>var point_vals = d3.select(&quot;#viz&quot;).append(&quot;p&quot;).text(&quot;Mouseover some data!&quot;);

//Get how wide our page is in pixels so we can draw our plot in it
var page_width = $(&quot;#did-it-work&quot;).width();
  
// set the dimensions and margins of the graph
var margin = 20,
    width = page_width - 2*margin,
    height = page_width*0.8 - 2*margin;
    
// Find max data values
var x_extent = d3.extent(data, d =&gt; d.x);
var y_extent = d3.extent(data, d =&gt; d.y);

// Set the scales 
var x = d3.scaleLinear()
  .domain(x_extent)
  .range([0, width]);
  
var y = d3.scaleLinear()
  .domain(y_extent)
  .range([height, 0]);

//Set up our SVG element
var svg = d3.select(&quot;#viz&quot;).append(&quot;svg&quot;)
    .attr(&quot;width&quot;, width + 2*margin)
    .attr(&quot;height&quot;, height + 2*margin)
  .append(&quot;g&quot;)
    .attr(&quot;transform&quot;,
          &quot;translate(&quot; + margin + &quot;,&quot; + margin + &quot;)&quot;);

var bounce_select = d3.transition()
    .duration(1000)
    .ease(d3.easeElastic.period(0.4));
    
// Add the scatterplot
svg.selectAll(&quot;.dots&quot;)
    .data(data)
  .enter().append(&quot;circle&quot;)
    .attr(&quot;class&quot;, &quot;dots&quot;)
    .attr(&quot;fill&quot;, d =&gt; d.group === &quot;group 1&quot;? &quot;steelblue&quot;:&quot;orangered&quot;)
    .attr(&quot;fill-opacity&quot;, 0.3)
    .attr(&quot;r&quot;, 5)
    .attr(&quot;cx&quot;, d =&gt; x(d.x) )
    .attr(&quot;cy&quot;, d =&gt; y(d.y) )
    .on(&quot;mouseover&quot;, function(d){
       d3.selectAll(&quot;.dots&quot;).attr(&quot;r&quot;, 5) //make sure all the dots are small
       d3.select(this)
        .transition(bounce_select)
        .attr(&quot;r&quot;, 10);
      
       point_vals.text(&quot;X:&quot; + d.x + &quot; Y:&quot; + d.y) //change the title of the graph to the datapoint
    });
    
// Draw the axes    
// Add the X Axis
svg.append(&quot;g&quot;)
    .attr(&quot;transform&quot;, &quot;translate(0,&quot; + height + &quot;)&quot;)
    .call(d3.axisBottom(x));

// Add the Y Axis
svg.append(&quot;g&quot;)
    .call(d3.axisLeft(y));</code></pre>
</div>




    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="../../../../" style="background-image: url(/images/logo.png)"><span class="hidden">'s Picture</span></a>
    </figure>
    

    








<div class="post-author">

    <img style = "border-radius: 25px;" src="https://avatars0.githubusercontent.com/u/6764693?v=3&amp;u=c9c491a636605fe3d6122defb43eb367b3d9381f&amp;s=400" alt="Nick Strayer image" width="90" height="90">
    <br>
    <span style="font-size: 1.02em;font-weight: bold;">
        Nick Strayer
    </span>
    |
    <a style = "text-decoration: none;" class = "post-author__text" href = http://nickstrayer.me >
        <img style="width:20px;" src = "http://image.flaticon.com/icons/png/128/12/12195.png"/>
    </a>

    <a class="icon-twitter post-author__text" style="font-size: 1.4em; text-decoration: none;" href = https://twitter.com/NicholasStrayer onclick="window.open(this.href"></a>

    <a style = "text-decoration: none;" class = "post-author__text" href = https://github.com/nstrayer >
        <img style="width:23px;" src = "https://a248.e.akamai.net/assets.github.com/images/icons/emoji/octocat.png"/>
    </a>


    <br>

    <p class="post-author__text">Randomly walking my way though a career in statistics</p>
    


    
<section class="share">
  <p style="font-size: 1em; font-weight:bold;">Share this post <a class="icon-twitter" style="font-size: 1.1em" href="https://twitter.com/share?text=Custom%20JavaScript%20Visualizations%20in%20RMarkdown&nbsp;-&nbsp;Live%20Free%20or%20Dichotomize&amp;url=https://livefreeordichotomize.com%2f2017%2f01%2f24%2fcustom-javascript-visualizations-in-rmarkdown%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
 </a></p>
</section>



    




  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Live Free or Dichotomize</a> </section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="../../../../js/jquery.js"></script>
    <script type="text/javascript" src="../../../../js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="../../../../js/index.js"></script>
    
</body>
</html>

