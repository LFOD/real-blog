<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
<title>Live Free or Dichotomize - Custom JavaScript visualizations in RMarkdown</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Live Free or Dichotomize">
<meta name="generator" content="Hugo 0.21" />

  
  



<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">


    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">








<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">


<link rel="stylesheet" href="../../../../css/custom_style.css">

</head>

<link rel="stylesheet" href="../../../../css/tufte.css">
<link rel="stylesheet" href="../../../../css/hugo-tufte.css">
<link rel="stylesheet" href="../../../../css/hugo-tufte-override.css">
<body>
<div id="layout" class="pure-g">
<article class="pure-u-1">
<header class="brand">
  <h1>
    <a href="../../../../">
      <img src="../../../../images/logo.png" alt="Blog Logo" style="height: 40px; width:40px">
    </a>
  </h1>
</header>

<section>
<h1 class="content-title">
  
  <a href="../../../../2017/01/24/custom-javascript-visualizations-in-rmarkdown/">Custom JavaScript visualizations in RMarkdown</a>
  
</h1>



  <span class="content-meta">
    
       <i class="fa fa-user">&nbsp;</i><span class="author">
         &nbsp;Nick Strayer</span> <br>
    


    
      <i class="fa fa-calendar"></i>
      &nbsp;Jan 24, 2017
    

    
      &nbsp;<i class="fa fa-clock-o"></i>
      &nbsp;7 min read
    

    
      <br>
      <i class="fa fa-tags"> </i>
      
        <a  href="../../../../categories/javascript">javascript</a>
      
        <a  href="../../../../categories/visualization">visualization</a>
      
    
  </span>


</section>



<section><p><br></p>
<p>I happened to stumble upon the <a href="https://www.rstudio.com/products/rstudio/download/preview/">preview release page</a> for RStudio recently and noticed something that made me exorbitantly happy.</p>
<blockquote>
<p>A preview release of RStudio v1.0.136 is now available for testing and feedback. This release includes… Support for JavaScript and CSS chunks in R Notebooks…</p>
</blockquote>
<p><em>“Support for JavaScript and CSS chunks in R Notebooks”</em>! As someone who loves using javascript for plotting (and secretly for manipulating) data this is massively exciting. Previously my workflow for generating an interactive graphic would be something like:</p>
<ul>
<li>Download data</li>
<li>Clean data and do preliminary visualization in R</li>
<li>Export what I liked to a csv file and make a new directory with a set of <code>.html, .js, .css</code> files in it.</li>
<li>Load data into javascript/d3.js in the new javascript file.</li>
<li>Plot.</li>
</ul>
<p>This workflow has served me very well, I did it probably 20 times a day when working at the New York Times and I am very fast with it. If you want to just make a stand alone visualization it’s fantastic, however, as a biostatistician who works with a lot of other biostatisticians, people tend to want to see where the data comes from.</p>
<p>With Javascript chunks in <code>.Rmd</code> files you can explicitly show the code for data gathering/cleaning etc. in a language that your collaborators can understand, along with making custom d3 charts with that data. All without ever leaving RStudio. I will show you my quick and dirty solution to doing so.</p>
<div id="getting-data-into-javascript" class="section level2">
<h2>Getting data into Javascript</h2>
<p>Instead of generating a csv file in R and then loading that into javascript we will instead send the data directly through the html to javascript. (<em>Note:</em> This wont work well with super large data).</p>
<p>Inspired by <a href="https://medium.com/@becausealice2/getting-r-and-d3-js-to-play-nicely-in-r-markdown-270e302a52d3#.772g93eb3">this</a> medium post I wrote a little function that takes a dataframe and sends it to the html document in the <code>.json</code> format.</p>
<pre class="r"><code>library(tidyverse)
library(jsonlite)

send_df_to_js &lt;- function(df){
  cat(
    paste(
    &#39;&lt;script&gt;
      var data = &#39;,toJSON(df),&#39;;
    &lt;/script&gt;&#39;
    , sep=&quot;&quot;)
  )
}</code></pre>
<p>To illustrate how it works we will generate some random data into a dataframe.</p>
<pre class="r"><code>#Generate some random x and y data to plot
n &lt;- 300
random_data &lt;- data_frame(x = runif(n)*10) %&gt;% 
  mutate(y = 0.5*x^3 - 1.3*x^2 + rnorm(n, mean = 0, sd = 80),
         group = paste(&quot;group&quot;, sample(c(1,2,3), n, replace = T)))</code></pre>
<p>Now we send a snippit of the dataframe into the function to see the output…</p>
<pre class="r"><code>random_data %&gt;% 
  head() %&gt;% 
  send_df_to_js()</code></pre>
<pre><code>## &lt;script&gt;
##       var data = [{&quot;x&quot;:9.3624,&quot;y&quot;:383.5665,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:2.8576,&quot;y&quot;:11.0406,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:3.842,&quot;y&quot;:110.5351,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:7.4874,&quot;y&quot;:63.2524,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:7.6118,&quot;y&quot;:-11.9945,&quot;group&quot;:&quot;group 1&quot;},{&quot;x&quot;:7.7629,&quot;y&quot;:20.535,&quot;group&quot;:&quot;group 3&quot;}];
##     &lt;/script&gt;</code></pre>
<p>Beautiful, we have our data, in <code>json</code> format, wrapped in a script tag. Now we can send the whole dataframe through. This time I am using the <code>results = &quot;asis&quot;</code> option in the code chunk (<code>{r, results = &quot;asis&quot;}</code>), to write the results directly to the html document and not to the output like we did above.</p>
<pre class="r"><code>#Initiate data transfer protocol one
send_df_to_js(random_data)</code></pre>
<script>
      var data = [{"x":9.3624,"y":383.5665,"group":"group 2"},{"x":2.8576,"y":11.0406,"group":"group 2"},{"x":3.842,"y":110.5351,"group":"group 2"},{"x":7.4874,"y":63.2524,"group":"group 2"},{"x":7.6118,"y":-11.9945,"group":"group 1"},{"x":7.7629,"y":20.535,"group":"group 3"},{"x":8.1793,"y":277.8968,"group":"group 2"},{"x":2.7669,"y":44.3636,"group":"group 2"},{"x":1.7656,"y":47.5404,"group":"group 1"},{"x":3.1621,"y":2.1701,"group":"group 1"},{"x":0.0667,"y":-4.6424,"group":"group 1"},{"x":1.5942,"y":-46.7313,"group":"group 1"},{"x":6.7045,"y":146.9738,"group":"group 2"},{"x":2.0096,"y":-62.815,"group":"group 2"},{"x":8.7524,"y":157.5242,"group":"group 2"},{"x":9.6988,"y":302.6165,"group":"group 2"},{"x":9.9271,"y":386.2921,"group":"group 3"},{"x":4.9784,"y":68.1912,"group":"group 1"},{"x":3.0527,"y":-121.4459,"group":"group 3"},{"x":6.2496,"y":50.1909,"group":"group 1"},{"x":4.4452,"y":-33.2657,"group":"group 1"},{"x":0.6918,"y":-44.2237,"group":"group 2"},{"x":7.3709,"y":117.6614,"group":"group 1"},{"x":5.6749,"y":181.639,"group":"group 2"},{"x":0.0847,"y":-60.8984,"group":"group 3"},{"x":1.3819,"y":-4.2672,"group":"group 3"},{"x":2.6291,"y":-64.2861,"group":"group 3"},{"x":4.1094,"y":21.6573,"group":"group 1"},{"x":4.9562,"y":-70.149,"group":"group 2"},{"x":6.8474,"y":92.3481,"group":"group 1"},{"x":0.3063,"y":-50.1162,"group":"group 2"},{"x":8.7824,"y":181.9047,"group":"group 1"},{"x":2.7333,"y":-6.0202,"group":"group 1"},{"x":7.5826,"y":118.8149,"group":"group 1"},{"x":2.3483,"y":121.5806,"group":"group 1"},{"x":8.1864,"y":292.3545,"group":"group 2"},{"x":0.9508,"y":85.7416,"group":"group 2"},{"x":6.8917,"y":54.4268,"group":"group 3"},{"x":0.285,"y":55.7902,"group":"group 2"},{"x":7.932,"y":242.3399,"group":"group 2"},{"x":0.3717,"y":74.3816,"group":"group 1"},{"x":9.2417,"y":372.5278,"group":"group 2"},{"x":6.2716,"y":181.9786,"group":"group 2"},{"x":4.0114,"y":289.5217,"group":"group 3"},{"x":3.3933,"y":21.8634,"group":"group 2"},{"x":5.1756,"y":-97.5217,"group":"group 3"},{"x":4.5164,"y":-83.3273,"group":"group 3"},{"x":2.5695,"y":6.7291,"group":"group 1"},{"x":2.5295,"y":17.1847,"group":"group 2"},{"x":5.8893,"y":-79.766,"group":"group 1"},{"x":6.5014,"y":-12.9606,"group":"group 3"},{"x":9.1349,"y":332.7043,"group":"group 1"},{"x":4.5047,"y":44.3436,"group":"group 3"},{"x":6.5085,"y":72.4014,"group":"group 2"},{"x":0.5752,"y":2.5334,"group":"group 2"},{"x":7.804,"y":206.5909,"group":"group 3"},{"x":2.1874,"y":-5.3699,"group":"group 1"},{"x":2.5285,"y":-13.1096,"group":"group 1"},{"x":8.8884,"y":48.7664,"group":"group 3"},{"x":1.2067,"y":-150.6853,"group":"group 3"},{"x":6.8768,"y":6.2819,"group":"group 1"},{"x":5.5671,"y":-161.2654,"group":"group 1"},{"x":4.838,"y":248.4512,"group":"group 1"},{"x":8.2217,"y":283.8628,"group":"group 1"},{"x":5.3167,"y":129.172,"group":"group 1"},{"x":5.234,"y":107.9304,"group":"group 2"},{"x":3.4218,"y":-173.7157,"group":"group 3"},{"x":2.6624,"y":-15.04,"group":"group 2"},{"x":4.763,"y":-87.6876,"group":"group 3"},{"x":1.0205,"y":129.694,"group":"group 1"},{"x":2.5596,"y":26.6633,"group":"group 2"},{"x":2.8466,"y":136.429,"group":"group 3"},{"x":0.8618,"y":-110.4181,"group":"group 3"},{"x":3.2412,"y":77.1112,"group":"group 1"},{"x":1.1249,"y":-21.6089,"group":"group 1"},{"x":9.3479,"y":215.3665,"group":"group 1"},{"x":1.8579,"y":-30.1483,"group":"group 3"},{"x":9.4582,"y":277.2099,"group":"group 1"},{"x":5.209,"y":262.4805,"group":"group 2"},{"x":7.5474,"y":280.0859,"group":"group 3"},{"x":5.4956,"y":27.767,"group":"group 2"},{"x":5.2607,"y":164.28,"group":"group 2"},{"x":9.9768,"y":352.4158,"group":"group 2"},{"x":4.1024,"y":-62.9501,"group":"group 3"},{"x":1.2705,"y":122.1215,"group":"group 3"},{"x":3.6551,"y":-170.8416,"group":"group 1"},{"x":6.8402,"y":201.4389,"group":"group 2"},{"x":9.4369,"y":356.0832,"group":"group 2"},{"x":3.4645,"y":-136.2336,"group":"group 1"},{"x":5.1344,"y":-105.7106,"group":"group 3"},{"x":4.9452,"y":87.113,"group":"group 2"},{"x":0.7067,"y":44.27,"group":"group 1"},{"x":5.2657,"y":103.7769,"group":"group 1"},{"x":3.102,"y":-103.4056,"group":"group 1"},{"x":9.069,"y":280.4383,"group":"group 3"},{"x":7.5059,"y":180.2544,"group":"group 1"},{"x":7.5739,"y":190.326,"group":"group 1"},{"x":9.1056,"y":305.6416,"group":"group 2"},{"x":9.2565,"y":340.3664,"group":"group 3"},{"x":2.9093,"y":-10.7738,"group":"group 1"},{"x":9.3325,"y":275.7146,"group":"group 1"},{"x":8.7688,"y":216.5923,"group":"group 3"},{"x":9.5925,"y":354.7309,"group":"group 1"},{"x":4.5712,"y":32.1972,"group":"group 2"},{"x":9.223,"y":167.7822,"group":"group 2"},{"x":9.4221,"y":195.3395,"group":"group 1"},{"x":9.1261,"y":138.7262,"group":"group 1"},{"x":4.797,"y":4.8672,"group":"group 1"},{"x":7.5948,"y":73.5049,"group":"group 1"},{"x":2.9915,"y":-20.7585,"group":"group 2"},{"x":6.144,"y":127.3097,"group":"group 3"},{"x":9.9997,"y":418.041,"group":"group 3"},{"x":3.237,"y":-8.3574,"group":"group 1"},{"x":8.1534,"y":174.0125,"group":"group 1"},{"x":9.5774,"y":204.2843,"group":"group 1"},{"x":7.8251,"y":151.5197,"group":"group 1"},{"x":4.62,"y":24.2986,"group":"group 2"},{"x":9.932,"y":304.8695,"group":"group 3"},{"x":2.1604,"y":102.8544,"group":"group 1"},{"x":6.5312,"y":178.0443,"group":"group 1"},{"x":3.0454,"y":15.8587,"group":"group 1"},{"x":6.909,"y":80.944,"group":"group 1"},{"x":0.3683,"y":85.3864,"group":"group 3"},{"x":1.6891,"y":-102.1179,"group":"group 1"},{"x":4.5565,"y":82.5776,"group":"group 2"},{"x":9.905,"y":196.8817,"group":"group 2"},{"x":4.691,"y":88.1264,"group":"group 1"},{"x":2.6396,"y":-48.2685,"group":"group 3"},{"x":1.5704,"y":35.6984,"group":"group 3"},{"x":0.5344,"y":-23.714,"group":"group 1"},{"x":2.2963,"y":-0.2289,"group":"group 2"},{"x":2.5926,"y":-165.3669,"group":"group 1"},{"x":9.4968,"y":218.7518,"group":"group 3"},{"x":7.228,"y":42.7989,"group":"group 2"},{"x":3.4444,"y":130.4437,"group":"group 3"},{"x":4.2684,"y":180.9834,"group":"group 2"},{"x":9.9572,"y":401.9241,"group":"group 3"},{"x":3.5692,"y":-7.2905,"group":"group 3"},{"x":4.0662,"y":-62.2891,"group":"group 2"},{"x":9.8495,"y":333.4698,"group":"group 2"},{"x":0.3826,"y":-159.6546,"group":"group 2"},{"x":3.5257,"y":11.8711,"group":"group 1"},{"x":5.4009,"y":12.7775,"group":"group 1"},{"x":8.4859,"y":253.9951,"group":"group 1"},{"x":1.2746,"y":-163.0013,"group":"group 2"},{"x":0.2847,"y":20.2249,"group":"group 1"},{"x":3.5991,"y":62.2904,"group":"group 1"},{"x":9.1096,"y":360.1888,"group":"group 1"},{"x":8.5206,"y":142.5993,"group":"group 3"},{"x":5.4542,"y":22.1978,"group":"group 2"},{"x":5.2415,"y":192.5858,"group":"group 3"},{"x":3.0767,"y":-55.4935,"group":"group 2"},{"x":1.6453,"y":-4.2913,"group":"group 1"},{"x":8.088,"y":165.8462,"group":"group 3"},{"x":9.1763,"y":308.5197,"group":"group 3"},{"x":3.7574,"y":-43.1081,"group":"group 2"},{"x":8.1279,"y":5.5308,"group":"group 3"},{"x":0.9488,"y":66.0659,"group":"group 3"},{"x":1.6029,"y":-54.5118,"group":"group 2"},{"x":1.6844,"y":-1.2977,"group":"group 3"},{"x":9.3964,"y":351.7102,"group":"group 3"},{"x":0.1602,"y":-106.8359,"group":"group 2"},{"x":4.8665,"y":96.1814,"group":"group 1"},{"x":3.9627,"y":13.2953,"group":"group 1"},{"x":7.2526,"y":171.4277,"group":"group 3"},{"x":2.7711,"y":-98.2786,"group":"group 1"},{"x":2.8381,"y":83.5507,"group":"group 2"},{"x":9.7213,"y":287.6999,"group":"group 2"},{"x":1.3595,"y":71.2837,"group":"group 1"},{"x":0.5205,"y":118.9919,"group":"group 1"},{"x":2.6323,"y":-90.8648,"group":"group 2"},{"x":0.2809,"y":14.8699,"group":"group 1"},{"x":1.5991,"y":-65.3114,"group":"group 1"},{"x":2.8441,"y":-31.1542,"group":"group 1"},{"x":7.2977,"y":-10.3151,"group":"group 2"},{"x":6.2708,"y":146.4152,"group":"group 2"},{"x":9.9721,"y":189.9486,"group":"group 3"},{"x":8.8616,"y":169.631,"group":"group 3"},{"x":0.8264,"y":41.7738,"group":"group 1"},{"x":9.4379,"y":393.1419,"group":"group 3"},{"x":4.8058,"y":-20.7327,"group":"group 2"},{"x":6.3205,"y":87.3208,"group":"group 3"},{"x":6.2913,"y":24.7802,"group":"group 2"},{"x":9.8205,"y":343.9762,"group":"group 3"},{"x":8.8992,"y":102.2393,"group":"group 2"},{"x":7.6489,"y":249.1618,"group":"group 1"},{"x":2.0348,"y":-5.2173,"group":"group 2"},{"x":6.7229,"y":72.3589,"group":"group 2"},{"x":5.1492,"y":141.4635,"group":"group 2"},{"x":7.508,"y":153.6829,"group":"group 1"},{"x":8.8294,"y":146.9534,"group":"group 2"},{"x":0.8978,"y":197.918,"group":"group 3"},{"x":1.7335,"y":-48.5273,"group":"group 2"},{"x":7.7775,"y":240.9644,"group":"group 1"},{"x":9.3939,"y":325.2021,"group":"group 2"},{"x":7.2866,"y":288.9123,"group":"group 1"},{"x":8.5205,"y":88.9937,"group":"group 3"},{"x":6.9778,"y":104.291,"group":"group 1"},{"x":7.3651,"y":30.5832,"group":"group 1"},{"x":8.7142,"y":206.1656,"group":"group 1"},{"x":0.1058,"y":29.1177,"group":"group 2"},{"x":5.2205,"y":6.394,"group":"group 1"},{"x":5.3573,"y":25.2114,"group":"group 1"},{"x":8.6871,"y":117.8486,"group":"group 3"},{"x":6.2855,"y":66.8128,"group":"group 3"},{"x":5.5508,"y":-52.7381,"group":"group 3"},{"x":0.3614,"y":-225.1439,"group":"group 2"},{"x":1.9398,"y":-73.1679,"group":"group 1"},{"x":9.9144,"y":454.6686,"group":"group 1"},{"x":4.6231,"y":117.7783,"group":"group 3"},{"x":4.5462,"y":87.688,"group":"group 3"},{"x":8.1678,"y":300.3404,"group":"group 1"},{"x":9.7459,"y":444.8734,"group":"group 1"},{"x":1.3403,"y":89.8547,"group":"group 3"},{"x":7.8702,"y":220.7749,"group":"group 3"},{"x":4.0397,"y":-79.3451,"group":"group 1"},{"x":8.3885,"y":211.6182,"group":"group 2"},{"x":5.04,"y":98.5745,"group":"group 1"},{"x":3.1386,"y":-8.1658,"group":"group 3"},{"x":6.2523,"y":187.7049,"group":"group 3"},{"x":7.216,"y":204.2229,"group":"group 1"},{"x":1.8085,"y":-162.5557,"group":"group 1"},{"x":6.1495,"y":140.0361,"group":"group 3"},{"x":7.702,"y":149.1609,"group":"group 2"},{"x":5.3334,"y":-10.9386,"group":"group 3"},{"x":3.614,"y":63.2841,"group":"group 2"},{"x":4.4656,"y":42.3232,"group":"group 3"},{"x":0.6624,"y":70.6493,"group":"group 2"},{"x":5.1294,"y":-111.5526,"group":"group 2"},{"x":6.3483,"y":-1.5685,"group":"group 3"},{"x":2.0166,"y":66.1464,"group":"group 2"},{"x":1.0327,"y":-94.5138,"group":"group 1"},{"x":0.1943,"y":-10.6382,"group":"group 1"},{"x":0.9694,"y":60.9405,"group":"group 2"},{"x":4.3316,"y":101.2006,"group":"group 2"},{"x":9.5142,"y":365.4142,"group":"group 3"},{"x":3.4238,"y":-92.4198,"group":"group 3"},{"x":2.8274,"y":17.289,"group":"group 2"},{"x":3.2667,"y":-128.1538,"group":"group 3"},{"x":4.9821,"y":0.3201,"group":"group 2"},{"x":9.3465,"y":295.3387,"group":"group 2"},{"x":4.0797,"y":128.7612,"group":"group 3"},{"x":9.6128,"y":349.2727,"group":"group 3"},{"x":5.9529,"y":-4.8052,"group":"group 1"},{"x":3.6334,"y":123.0991,"group":"group 2"},{"x":5.9716,"y":99.5708,"group":"group 2"},{"x":7.2368,"y":20.0419,"group":"group 2"},{"x":2.4318,"y":-75.8062,"group":"group 3"},{"x":2.9772,"y":18.2629,"group":"group 2"},{"x":1.0497,"y":-86.0935,"group":"group 1"},{"x":8.9196,"y":220.3769,"group":"group 2"},{"x":1.0307,"y":-112.9498,"group":"group 3"},{"x":8.5448,"y":175.1455,"group":"group 2"},{"x":0.1009,"y":-31.7861,"group":"group 3"},{"x":0.1997,"y":8.7712,"group":"group 3"},{"x":4.6469,"y":150.7484,"group":"group 3"},{"x":8.0652,"y":177.5158,"group":"group 2"},{"x":5.1447,"y":1.4585,"group":"group 3"},{"x":9.0305,"y":172.5147,"group":"group 2"},{"x":5.3763,"y":40.2811,"group":"group 3"},{"x":7.5603,"y":271.8493,"group":"group 2"},{"x":8.2089,"y":126.0595,"group":"group 2"},{"x":4.7683,"y":6.2359,"group":"group 3"},{"x":3.6522,"y":-0.5492,"group":"group 3"},{"x":9.4927,"y":378.7585,"group":"group 3"},{"x":6.9992,"y":-58.5237,"group":"group 1"},{"x":7.3602,"y":117.5913,"group":"group 1"},{"x":0.1692,"y":35.9627,"group":"group 2"},{"x":2.9104,"y":-186.4534,"group":"group 3"},{"x":4.0307,"y":-29.4676,"group":"group 3"},{"x":5.5801,"y":57.3812,"group":"group 3"},{"x":8.623,"y":337.8582,"group":"group 3"},{"x":1.4179,"y":78.3465,"group":"group 2"},{"x":2.3967,"y":28.4855,"group":"group 1"},{"x":0.8649,"y":34.1461,"group":"group 1"},{"x":7.3959,"y":102.1488,"group":"group 1"},{"x":7.3578,"y":148.1344,"group":"group 2"},{"x":3.901,"y":120.3016,"group":"group 2"},{"x":5.8463,"y":128.3312,"group":"group 3"},{"x":3.0305,"y":-34.7929,"group":"group 3"},{"x":9.1122,"y":461.7062,"group":"group 2"},{"x":9.2123,"y":263.9144,"group":"group 1"},{"x":6.7003,"y":99.8972,"group":"group 1"},{"x":2.1804,"y":85.0281,"group":"group 1"},{"x":6.8629,"y":-14.6871,"group":"group 2"},{"x":1.7237,"y":-125.2386,"group":"group 1"},{"x":0.5062,"y":-102.7794,"group":"group 1"},{"x":1.4222,"y":2.1258,"group":"group 2"},{"x":0.4035,"y":-2.3946,"group":"group 1"},{"x":9.8884,"y":315.8901,"group":"group 3"},{"x":1.5848,"y":31.9866,"group":"group 1"},{"x":5.2988,"y":-4.0444,"group":"group 2"},{"x":2.6238,"y":71.1593,"group":"group 3"},{"x":5.5914,"y":-8.3675,"group":"group 3"},{"x":5.4171,"y":22.844,"group":"group 3"},{"x":6.0591,"y":-12.5054,"group":"group 2"},{"x":2.804,"y":77.9406,"group":"group 3"},{"x":2.212,"y":-103.6112,"group":"group 1"},{"x":6.396,"y":106.4078,"group":"group 1"},{"x":0.2739,"y":66.5102,"group":"group 3"}];
    </script>
<p>Now our data is inside our page’s javascript scope and ready to be played with!</p>
</div>
<div id="drawing-pretty-pictures" class="section level2">
<h2>Drawing pretty pictures</h2>
<p>Let’s make a super simple d3 scatter plot to see this randomly generated data. All I have to do is include my desired javascript libraries, make a <code>div</code> element for my visualization to go into and then put my <code>{js}</code> block in. RMarkdown will slot the javascript into the page and we’re good to go.</p>
<p>In this example I did…</p>
<pre><code>&lt;script src=&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://d3js.org/d3.v4.min.js&quot;&gt;&lt;/script&gt;

&lt;div id = &quot;viz&quot;&gt;&lt;/div&gt; 

` ` `{js}
//code goes here
` ` `</code></pre>
</div>
<div id="did-it-work" class="section level2">
<h2>Did it work?</h2>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<div id="viz">

</div>
<script type="text/javascript">
var point_vals = d3.select("#viz")
  .append("p")
  .attr("align", "center")
  .text("Mouseover some data!");

//Get how wide our page is in pixels so we can draw our plot in it
var page_width = $("#did-it-work").width();
  
// set the dimensions and margins of the graph
var margin = 30,
    width = page_width - 2*margin,
    height = page_width*0.8 - 2*margin;
    
// Find max data values
var x_extent = d3.extent(data, d => d.x);
var y_extent = d3.extent(data, d => d.y);

// Set the scales 
var x = d3.scaleLinear()
  .domain(x_extent)
  .range([0, width]);
  
var y = d3.scaleLinear()
  .domain(y_extent)
  .range([height, 0]);

//Set up our SVG element
var svg = d3.select("#viz").append("svg")
    .attr("width", width + 2*margin)
    .attr("height", height + 2*margin)
  .append("g")
    .attr("transform",
          "translate(" + margin + "," + margin + ")");

var bounce_select = d3.transition()
    .duration(1000)
    .ease(d3.easeElastic.period(0.4));
    
// Add the scatterplot
svg.selectAll(".dots")
    .data(data)
  .enter().append("circle")
    .attr("class", "dots")
    .attr("fill", d => d.group === "group 1"? "steelblue":"orangered")
    .attr("fill-opacity", 0.3)
    .attr("r", 5)
    .attr("cx", d => x(d.x) )
    .attr("cy", d => y(d.y) )
    .on("mouseover", function(d){
       d3.selectAll(".dots").attr("r", 5) //make sure all the dots are small
       d3.select(this)
        .transition(bounce_select)
        .attr("r", 10);
      
       point_vals.text("X:" + d.x + " Y:" + d.y) //change the title of the graph to the datapoint
    });
    
// Draw the axes    
// Add the X Axis
svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

// Add the Y Axis
svg.append("g")
    .call(d3.axisLeft(y));
</script>
</div>
<div id="why-when" class="section level2">
<h2>Why/ When</h2>
<p>This is a bad example of a visualization for this scenario as something like plotly could do this in much less effort. If you’re doing something more complicated/ bespoke then this is a great resource to have.</p>
</div>
<div id="addendum" class="section level2">
<h2>Addendum</h2>
<p>If you’re interested, here’s the javascript code I included to make the above graph.</p>
<pre><code>var point_vals = d3.select(&quot;#viz&quot;).append(&quot;p&quot;).text(&quot;Mouseover some data!&quot;);

//Get how wide our page is in pixels so we can draw our plot in it
var page_width = $(&quot;#did-it-work&quot;).width();
  
// set the dimensions and margins of the graph
var margin = 20,
    width = page_width - 2*margin,
    height = page_width*0.8 - 2*margin;
    
// Find max data values
var x_extent = d3.extent(data, d =&gt; d.x);
var y_extent = d3.extent(data, d =&gt; d.y);

// Set the scales 
var x = d3.scaleLinear()
  .domain(x_extent)
  .range([0, width]);
  
var y = d3.scaleLinear()
  .domain(y_extent)
  .range([height, 0]);

//Set up our SVG element
var svg = d3.select(&quot;#viz&quot;).append(&quot;svg&quot;)
    .attr(&quot;width&quot;, width + 2*margin)
    .attr(&quot;height&quot;, height + 2*margin)
  .append(&quot;g&quot;)
    .attr(&quot;transform&quot;,
          &quot;translate(&quot; + margin + &quot;,&quot; + margin + &quot;)&quot;);

var bounce_select = d3.transition()
    .duration(1000)
    .ease(d3.easeElastic.period(0.4));
    
// Add the scatterplot
svg.selectAll(&quot;.dots&quot;)
    .data(data)
  .enter().append(&quot;circle&quot;)
    .attr(&quot;class&quot;, &quot;dots&quot;)
    .attr(&quot;fill&quot;, d =&gt; d.group === &quot;group 1&quot;? &quot;steelblue&quot;:&quot;orangered&quot;)
    .attr(&quot;fill-opacity&quot;, 0.3)
    .attr(&quot;r&quot;, 5)
    .attr(&quot;cx&quot;, d =&gt; x(d.x) )
    .attr(&quot;cy&quot;, d =&gt; y(d.y) )
    .on(&quot;mouseover&quot;, function(d){
       d3.selectAll(&quot;.dots&quot;).attr(&quot;r&quot;, 5) //make sure all the dots are small
       d3.select(this)
        .transition(bounce_select)
        .attr(&quot;r&quot;, 10);
      
       point_vals.text(&quot;X:&quot; + d.x + &quot; Y:&quot; + d.y) //change the title of the graph to the datapoint
    });
    
// Draw the axes    
// Add the X Axis
svg.append(&quot;g&quot;)
    .attr(&quot;transform&quot;, &quot;translate(0,&quot; + height + &quot;)&quot;)
    .call(d3.axisBottom(x));

// Add the Y Axis
svg.append(&quot;g&quot;)
    .call(d3.axisLeft(y));</code></pre>
</div>
</section>
<section>
  









<style>

  .author_blurb {
    display: flex;
    flex-direction: row;    
    justify-content: flex-start;
    align-items: flex-start;
    height: 150px;
    text-decoration none;
  }
  
  .author_photo {
  }
  
  .photo{
    width: 90px;
  }
  
  .author_info{
    display: flex;
    flex-direction: column;    
    padding-left: 15px;
    justify-content: center;
  }
  
  .name{
    font-family: "Merriweather", serif;
    letter-spacing: 0.01rem;
    font-size: 1.7rem;
  }
  
  .contact_info{
    align-content: center;
  }
  
  .contact_info a {
    background-repeat: no-repeat, no-repeat, no-repeat !important;
    text-decoration: none !important;
  }
  
  .bio{
    height: 100px;
    padding-top: 0px;
  }
  
  .bio_text{
    padding-top: 5px;
    margin-top: auto;
    font-size: 1.2rem;
    line-height: 1.5em;
    font-weight: 200;
    color: #636363;
    letter-spacing: 0;
    text-indent: 0;
  }
  
   
  @media all and (max-width: 800px) {
    .author_blurb {
      
    }
  }
  
   
  @media all and (max-width: 500px) {
    .author_blurb {
      flex-direction: column;    
    }
    .author_info{
      padding-top: 40px;
    }
    .author_photo {
      align-self: center;
    }
  }
  
</style>


<div class="author_blurb">

  <div class="author_photo">
    <div class="photo">
      <img style = "border-radius: 25px;" src="https://avatars0.githubusercontent.com/u/6764693?v=3&amp;u=c9c491a636605fe3d6122defb43eb367b3d9381f&amp;s=400" alt="Nick Strayer image" width="90" height="90">
    </div>
        
  </div>
  <div class = "author_info">
    
    <div class = "contact_info">
        <span class = "name"> Nick Strayer |</span>
        
        <a class = "social_buttons" href = http://nickstrayer.me >
            <img style="width:20px;" src = "http://image.flaticon.com/icons/png/128/12/12195.png"/>
        </a>
        
        <a class="social_buttons" href = https://twitter.com/NicholasStrayer>
          <img style="width:22px;" src = "https://cdn1.iconfinder.com/data/icons/logotypes/32/twitter-128.png"/>
        </a>
    
        <a class = "social_buttons" href = https://github.com/nstrayer >
          <img style="width:23px;" src = "https://a248.e.akamai.net/assets.github.com/images/icons/emoji/octocat.png"/>
        </a>
    </div>
    
    
    <div class = "bio">
      <p class = "bio_text">Randomly walking my way though a career in statistics</p>
    </div>
    
  </div>

  
</div>


  
  <div id="disqus_thread"></div>
  <script type="text/javascript">

  (function() {
      
      
      if (window.location.hostname == "localhost")
          return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = '';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  <footer class="page-footer">
		<hr>
		<ul class="page-footer-menu">
		
		</ul>

  

	<div class="copyright">
	<p>
    
      &copy; 2017
    .
    All rights reserved.
    
  </p>
</div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</footer>



</section>
</article>
</div>
</body>
</html>
