<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
<title>Live Free or Dichotomize - Custom JavaScript visualizations in RMarkdown</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Live Free or Dichotomize">
<meta name="generator" content="Hugo 0.20.2" />

  
  



<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">


    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">








<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<link rel="stylesheet" href="../../../../css/custom_style.css">

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92165973-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<link rel="stylesheet" href="../../../../css/tufte.css">
<link rel="stylesheet" href="../../../../css/hugo-tufte.css">
<link rel="stylesheet" href="../../../../css/hugo-tufte-override.css">
<body>
<div id="layout" class="pure-g">
<article class="pure-u-1">
<header class="brand">
  <h1>
    <a href="../../../../">
      <img src="../../../../images/logo.png" alt="Blog Logo" style="height: 40px; width:40px">
    </a>
  </h1>
</header>

<section>
  <h1 class="content-title">
  
  <a href="../../../../2017/01/24/custom-javascript-visualizations-in-rmarkdown/">Custom JavaScript visualizations in RMarkdown</a>
  
  </h1>
  
  
  
  <span class="content-meta">
    
  
  
  <i class="fa fa-user">&nbsp;</i><span class="author">
    &nbsp;Nick Strayer</span> <br>
    
  
  
  
  <i class="fa fa-calendar"></i>
    &nbsp;Jan 24, 2017
  
  
  
  &nbsp;<i class="fa fa-clock-o"></i>
    &nbsp;7 min read
  
  
  
  <br>
    <i class="fa fa-tags"> </i>
    
    <a  href="../../../../categories/javascript">javascript</a>
    
    <a  href="../../../../categories/visualization">visualization</a>
    
    
    </span>
    
    
    </section>


<section><p><br></p>
<p>I happened to stumble upon the <a href="https://www.rstudio.com/products/rstudio/download/preview/">preview release page</a> for RStudio recently and noticed something that made me exorbitantly happy.</p>
<blockquote>
<p>A preview release of RStudio v1.0.136 is now available for testing and feedback. This release includes… Support for JavaScript and CSS chunks in R Notebooks…</p>
</blockquote>
<p><em>“Support for JavaScript and CSS chunks in R Notebooks”</em>! As someone who loves using javascript for plotting (and secretly for manipulating) data this is massively exciting. Previously my workflow for generating an interactive graphic would be something like:</p>
<ul>
<li>Download data</li>
<li>Clean data and do preliminary visualization in R</li>
<li>Export what I liked to a csv file and make a new directory with a set of <code>.html, .js, .css</code> files in it.</li>
<li>Load data into javascript/d3.js in the new javascript file.</li>
<li>Plot.</li>
</ul>
<p>This workflow has served me very well, I did it probably 20 times a day when working at the New York Times and I am very fast with it. If you want to just make a stand alone visualization it’s fantastic, however, as a biostatistician who works with a lot of other biostatisticians, people tend to want to see where the data comes from.</p>
<p>With Javascript chunks in <code>.Rmd</code> files you can explicitly show the code for data gathering/cleaning etc. in a language that your collaborators can understand, along with making custom d3 charts with that data. All without ever leaving RStudio. I will show you my quick and dirty solution to doing so.</p>
<div id="getting-data-into-javascript" class="section level2">
<h2>Getting data into Javascript</h2>
<p>Instead of generating a csv file in R and then loading that into javascript we will instead send the data directly through the html to javascript. (<em>Note:</em> This wont work well with super large data).</p>
<p>Inspired by <a href="https://medium.com/@becausealice2/getting-r-and-d3-js-to-play-nicely-in-r-markdown-270e302a52d3#.772g93eb3">this</a> medium post I wrote a little function that takes a dataframe and sends it to the html document in the <code>.json</code> format.</p>
<pre class="r"><code>library(tidyverse)
library(jsonlite)

send_df_to_js &lt;- function(df){
  cat(
    paste(
    &#39;&lt;script&gt;
      var data = &#39;,toJSON(df),&#39;;
    &lt;/script&gt;&#39;
    , sep=&quot;&quot;)
  )
}</code></pre>
<p>To illustrate how it works we will generate some random data into a dataframe.</p>
<pre class="r"><code>#Generate some random x and y data to plot
n &lt;- 300
random_data &lt;- data_frame(x = runif(n)*10) %&gt;% 
  mutate(y = 0.5*x^3 - 1.3*x^2 + rnorm(n, mean = 0, sd = 80),
         group = paste(&quot;group&quot;, sample(c(1,2,3), n, replace = T)))</code></pre>
<p>Now we send a snippit of the dataframe into the function to see the output…</p>
<pre class="r"><code>random_data %&gt;% 
  head() %&gt;% 
  send_df_to_js()</code></pre>
<pre><code>## &lt;script&gt;
##       var data = [{&quot;x&quot;:8.1137,&quot;y&quot;:45.704,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:8.0455,&quot;y&quot;:10.4571,&quot;group&quot;:&quot;group 1&quot;},{&quot;x&quot;:0.5177,&quot;y&quot;:70.1536,&quot;group&quot;:&quot;group 3&quot;},{&quot;x&quot;:0.171,&quot;y&quot;:51.6814,&quot;group&quot;:&quot;group 2&quot;},{&quot;x&quot;:2.2069,&quot;y&quot;:-26.1143,&quot;group&quot;:&quot;group 1&quot;},{&quot;x&quot;:2.4624,&quot;y&quot;:-78.9991,&quot;group&quot;:&quot;group 1&quot;}];
##     &lt;/script&gt;</code></pre>
<p>Beautiful, we have our data, in <code>json</code> format, wrapped in a script tag. Now we can send the whole dataframe through. This time I am using the <code>results = &quot;asis&quot;</code> option in the code chunk (<code>{r, results = &quot;asis&quot;}</code>), to write the results directly to the html document and not to the output like we did above.</p>
<pre class="r"><code>#Initiate data transfer protocol one
send_df_to_js(random_data)</code></pre>
<script>
      var data = [{"x":8.1137,"y":45.704,"group":"group 2"},{"x":8.0455,"y":10.4571,"group":"group 1"},{"x":0.5177,"y":70.1536,"group":"group 3"},{"x":0.171,"y":51.6814,"group":"group 2"},{"x":2.2069,"y":-26.1143,"group":"group 1"},{"x":2.4624,"y":-78.9991,"group":"group 1"},{"x":9.5493,"y":221.9077,"group":"group 1"},{"x":9.0101,"y":221.5178,"group":"group 3"},{"x":0.3152,"y":-78.6759,"group":"group 3"},{"x":4.4863,"y":-90.2408,"group":"group 2"},{"x":1.6541,"y":-116.3985,"group":"group 1"},{"x":8.2041,"y":227.9991,"group":"group 2"},{"x":9.7562,"y":374.0784,"group":"group 3"},{"x":0.2515,"y":55.9715,"group":"group 3"},{"x":7.6574,"y":9.1949,"group":"group 3"},{"x":3.7944,"y":-233.94,"group":"group 2"},{"x":8.5824,"y":205.3918,"group":"group 1"},{"x":7.1348,"y":172.1514,"group":"group 2"},{"x":3.5861,"y":-37.9195,"group":"group 3"},{"x":0.0581,"y":40.2612,"group":"group 2"},{"x":3.1274,"y":42.104,"group":"group 3"},{"x":3.8824,"y":83.3689,"group":"group 2"},{"x":0.3985,"y":-58.44,"group":"group 2"},{"x":3.8721,"y":-34.715,"group":"group 3"},{"x":9.3887,"y":359.0555,"group":"group 2"},{"x":7.0341,"y":186.1981,"group":"group 3"},{"x":4.3576,"y":35.2168,"group":"group 3"},{"x":5.9485,"y":96.7954,"group":"group 2"},{"x":9.168,"y":307.9524,"group":"group 3"},{"x":0.1644,"y":36.2763,"group":"group 3"},{"x":1.4564,"y":-58.1073,"group":"group 1"},{"x":9.7544,"y":487.3058,"group":"group 3"},{"x":3.9799,"y":-52.2569,"group":"group 1"},{"x":5.6186,"y":146.4454,"group":"group 3"},{"x":2.0882,"y":39.0674,"group":"group 3"},{"x":6.3444,"y":11.4018,"group":"group 3"},{"x":9.1324,"y":182.9526,"group":"group 2"},{"x":4.4113,"y":4.0295,"group":"group 2"},{"x":0.7008,"y":-60.0352,"group":"group 2"},{"x":3.6496,"y":-58.3161,"group":"group 1"},{"x":1.1961,"y":-91.1973,"group":"group 3"},{"x":1.145,"y":52.5388,"group":"group 3"},{"x":0.8605,"y":69.9784,"group":"group 3"},{"x":6.378,"y":-71.0965,"group":"group 1"},{"x":9.2365,"y":410.4409,"group":"group 1"},{"x":1.1805,"y":4.3764,"group":"group 2"},{"x":7.4135,"y":71.7497,"group":"group 3"},{"x":7.0396,"y":92.2583,"group":"group 2"},{"x":8.4375,"y":191.7523,"group":"group 3"},{"x":7.1235,"y":114.27,"group":"group 1"},{"x":0.0606,"y":-34.8652,"group":"group 1"},{"x":5.0317,"y":43.5121,"group":"group 1"},{"x":2.5761,"y":-67.8492,"group":"group 1"},{"x":8.7188,"y":238.5591,"group":"group 1"},{"x":5.5273,"y":38.5994,"group":"group 1"},{"x":6.5363,"y":160.0187,"group":"group 2"},{"x":8.4107,"y":19.6685,"group":"group 2"},{"x":2.9272,"y":49.2145,"group":"group 3"},{"x":3.2728,"y":-44.0227,"group":"group 2"},{"x":6.1032,"y":68.0863,"group":"group 1"},{"x":7.8414,"y":126.1495,"group":"group 1"},{"x":7.8544,"y":217.4879,"group":"group 1"},{"x":3.0002,"y":7.8529,"group":"group 2"},{"x":8.1923,"y":226.7358,"group":"group 2"},{"x":7.8612,"y":118.6036,"group":"group 3"},{"x":9.0471,"y":196.7671,"group":"group 2"},{"x":5.2787,"y":152.7643,"group":"group 1"},{"x":3.8653,"y":188.3465,"group":"group 3"},{"x":1.1719,"y":95.6952,"group":"group 2"},{"x":9.8331,"y":391.4414,"group":"group 2"},{"x":7.8336,"y":82.4192,"group":"group 1"},{"x":3.3935,"y":-92.8805,"group":"group 2"},{"x":6.1552,"y":-64.6707,"group":"group 3"},{"x":2.3098,"y":-45.2209,"group":"group 3"},{"x":2.4704,"y":-154.3837,"group":"group 3"},{"x":5.7907,"y":80.8574,"group":"group 3"},{"x":9.761,"y":250.7768,"group":"group 3"},{"x":8.0167,"y":149.6749,"group":"group 3"},{"x":2.2983,"y":-102.9667,"group":"group 1"},{"x":8.9837,"y":202.4012,"group":"group 2"},{"x":5.974,"y":-76.9914,"group":"group 2"},{"x":7.8841,"y":139.661,"group":"group 1"},{"x":5.5329,"y":-19.2837,"group":"group 2"},{"x":7.2102,"y":43.6873,"group":"group 3"},{"x":6.0136,"y":-28.4619,"group":"group 2"},{"x":3.4688,"y":28.4133,"group":"group 2"},{"x":4.2537,"y":7.0166,"group":"group 3"},{"x":7.0911,"y":-46.3431,"group":"group 3"},{"x":2.3759,"y":-50.9551,"group":"group 2"},{"x":1.7216,"y":-99.0507,"group":"group 1"},{"x":8.8125,"y":-7.1244,"group":"group 1"},{"x":5.9178,"y":67.1047,"group":"group 2"},{"x":3.2202,"y":33.0371,"group":"group 2"},{"x":5.2781,"y":-186.3453,"group":"group 1"},{"x":6.6124,"y":101.37,"group":"group 1"},{"x":5.977,"y":-0.7987,"group":"group 1"},{"x":6.3791,"y":11.9138,"group":"group 3"},{"x":1.9605,"y":-15.6238,"group":"group 3"},{"x":7.1334,"y":151.6333,"group":"group 1"},{"x":2.9435,"y":71.0464,"group":"group 2"},{"x":4.6358,"y":33.2494,"group":"group 2"},{"x":9.6389,"y":272.5589,"group":"group 2"},{"x":8.2291,"y":212.2622,"group":"group 2"},{"x":8.2769,"y":133.252,"group":"group 2"},{"x":7.6484,"y":228.3466,"group":"group 3"},{"x":0.795,"y":-66.182,"group":"group 3"},{"x":4.7498,"y":46.0269,"group":"group 2"},{"x":3.2577,"y":6.7748,"group":"group 2"},{"x":9.8507,"y":335.4674,"group":"group 1"},{"x":7.9836,"y":138.6312,"group":"group 2"},{"x":0.154,"y":-135.4208,"group":"group 3"},{"x":0.7428,"y":-39.8824,"group":"group 2"},{"x":5.0412,"y":-102.3275,"group":"group 2"},{"x":9.7366,"y":226.1616,"group":"group 3"},{"x":7.3855,"y":159.7408,"group":"group 2"},{"x":8.1369,"y":151.5288,"group":"group 3"},{"x":6.9638,"y":72.2178,"group":"group 3"},{"x":4.0189,"y":116.0833,"group":"group 1"},{"x":8.6887,"y":115.5515,"group":"group 3"},{"x":1.7167,"y":49.9854,"group":"group 3"},{"x":4.0755,"y":13.4202,"group":"group 3"},{"x":9.184,"y":257.5738,"group":"group 2"},{"x":4.7591,"y":108.6931,"group":"group 3"},{"x":8.7953,"y":387.3768,"group":"group 3"},{"x":6.7908,"y":49.1292,"group":"group 1"},{"x":5.1517,"y":-8.0886,"group":"group 2"},{"x":3.3889,"y":252.458,"group":"group 2"},{"x":5.2468,"y":-97.8947,"group":"group 3"},{"x":3.4917,"y":18.2816,"group":"group 2"},{"x":1.1385,"y":-130.3817,"group":"group 1"},{"x":5.824,"y":89.7955,"group":"group 2"},{"x":3.6283,"y":-48.4143,"group":"group 1"},{"x":8.7931,"y":325.9654,"group":"group 3"},{"x":3.1855,"y":-91.5746,"group":"group 3"},{"x":1.6779,"y":-32.4122,"group":"group 3"},{"x":1.2743,"y":77.4155,"group":"group 2"},{"x":3.4257,"y":30.1336,"group":"group 3"},{"x":8.153,"y":107.5382,"group":"group 2"},{"x":5.0918,"y":-100.2961,"group":"group 3"},{"x":2.1797,"y":-30.0254,"group":"group 2"},{"x":6.4764,"y":74.8989,"group":"group 2"},{"x":5.2773,"y":18.1635,"group":"group 2"},{"x":8.7423,"y":240.3687,"group":"group 1"},{"x":8.1945,"y":234.4236,"group":"group 2"},{"x":5.4789,"y":121.0796,"group":"group 2"},{"x":8.7094,"y":201.8298,"group":"group 2"},{"x":5.2308,"y":20.2323,"group":"group 1"},{"x":7.2078,"y":184.095,"group":"group 2"},{"x":2.8829,"y":-11.1469,"group":"group 1"},{"x":8.8545,"y":269.3052,"group":"group 1"},{"x":1.5432,"y":26.9867,"group":"group 2"},{"x":0.682,"y":46.5529,"group":"group 3"},{"x":3.8651,"y":-106.1729,"group":"group 3"},{"x":9.6056,"y":272.8971,"group":"group 2"},{"x":4.8899,"y":-0.4411,"group":"group 1"},{"x":9.194,"y":327.1716,"group":"group 1"},{"x":8.8413,"y":299.5951,"group":"group 1"},{"x":8.6216,"y":333.5785,"group":"group 1"},{"x":9.2997,"y":172.9077,"group":"group 3"},{"x":2.3226,"y":64.9915,"group":"group 2"},{"x":1.1016,"y":-35.3066,"group":"group 2"},{"x":2.4807,"y":-94.4033,"group":"group 3"},{"x":9.2852,"y":288.5917,"group":"group 1"},{"x":7.3172,"y":136.444,"group":"group 2"},{"x":2.9327,"y":-12.3326,"group":"group 2"},{"x":5.8824,"y":35.525,"group":"group 2"},{"x":1.8141,"y":85.991,"group":"group 1"},{"x":4.5085,"y":-163.9933,"group":"group 3"},{"x":3.2273,"y":72.7723,"group":"group 1"},{"x":0.2242,"y":17.7743,"group":"group 3"},{"x":9.9515,"y":248.777,"group":"group 2"},{"x":5.3762,"y":73.1169,"group":"group 2"},{"x":3.902,"y":-43.9927,"group":"group 2"},{"x":4.5533,"y":29.3948,"group":"group 1"},{"x":8.3357,"y":174.6047,"group":"group 3"},{"x":2.5073,"y":3.9511,"group":"group 3"},{"x":5.5615,"y":114.7829,"group":"group 3"},{"x":1.7358,"y":97.4374,"group":"group 1"},{"x":8.1849,"y":60.6663,"group":"group 1"},{"x":9.8578,"y":461.029,"group":"group 3"},{"x":1.1964,"y":-72.9435,"group":"group 2"},{"x":8.7729,"y":421.8975,"group":"group 3"},{"x":4.9037,"y":-30.1434,"group":"group 2"},{"x":0.5698,"y":45.7828,"group":"group 2"},{"x":9.9602,"y":373.6736,"group":"group 1"},{"x":3.034,"y":-201.3552,"group":"group 2"},{"x":9.3655,"y":227.3904,"group":"group 1"},{"x":5.5748,"y":-100.3018,"group":"group 2"},{"x":3.6935,"y":-68.6937,"group":"group 2"},{"x":9.0236,"y":85.4078,"group":"group 3"},{"x":8.1707,"y":350.125,"group":"group 3"},{"x":6.1513,"y":103.4149,"group":"group 1"},{"x":5.5065,"y":-53.4143,"group":"group 3"},{"x":7.6562,"y":341.4818,"group":"group 1"},{"x":9.1878,"y":109.1788,"group":"group 1"},{"x":8.883,"y":283.0543,"group":"group 1"},{"x":9.4444,"y":277.3969,"group":"group 2"},{"x":6.6719,"y":80.7675,"group":"group 3"},{"x":9.3207,"y":238.314,"group":"group 2"},{"x":9.2453,"y":262.5756,"group":"group 2"},{"x":5.5869,"y":-172.4746,"group":"group 1"},{"x":3.2765,"y":-98.0426,"group":"group 2"},{"x":8.0316,"y":179.711,"group":"group 2"},{"x":1.5362,"y":-106.2735,"group":"group 1"},{"x":9.7322,"y":343.5969,"group":"group 3"},{"x":5.9619,"y":140.9829,"group":"group 1"},{"x":1.2473,"y":-12.0318,"group":"group 1"},{"x":5.8506,"y":123.2258,"group":"group 2"},{"x":9.9982,"y":270.2857,"group":"group 1"},{"x":2.0817,"y":66.5752,"group":"group 2"},{"x":7.3821,"y":160.7261,"group":"group 1"},{"x":4.9293,"y":119.4746,"group":"group 2"},{"x":2.8709,"y":72.4223,"group":"group 1"},{"x":0.0302,"y":147.4217,"group":"group 1"},{"x":6.3074,"y":36.3278,"group":"group 3"},{"x":1.5594,"y":-97.2322,"group":"group 2"},{"x":0.3963,"y":-136.8079,"group":"group 2"},{"x":9.604,"y":309.889,"group":"group 1"},{"x":4.6835,"y":96.7554,"group":"group 2"},{"x":6.914,"y":213.9087,"group":"group 3"},{"x":6.3826,"y":27.33,"group":"group 2"},{"x":1.6032,"y":36.5773,"group":"group 1"},{"x":2.4721,"y":25.1027,"group":"group 1"},{"x":5.1911,"y":70.157,"group":"group 2"},{"x":8.3812,"y":130.2984,"group":"group 2"},{"x":2.1131,"y":-22.3495,"group":"group 3"},{"x":2.2458,"y":5.374,"group":"group 3"},{"x":5.2427,"y":164.7437,"group":"group 2"},{"x":6.9609,"y":215.9568,"group":"group 2"},{"x":8.2406,"y":106.6412,"group":"group 1"},{"x":9.1998,"y":251.458,"group":"group 1"},{"x":0.6554,"y":70.5782,"group":"group 3"},{"x":1.2876,"y":6.1823,"group":"group 3"},{"x":2.6835,"y":-33.0755,"group":"group 2"},{"x":6.5901,"y":1.0984,"group":"group 2"},{"x":6.3097,"y":-19.8926,"group":"group 2"},{"x":7.9168,"y":91.8226,"group":"group 1"},{"x":7.962,"y":174.2373,"group":"group 3"},{"x":7.1998,"y":11.35,"group":"group 1"},{"x":5.62,"y":200.3029,"group":"group 3"},{"x":6.7153,"y":-14.355,"group":"group 1"},{"x":6.443,"y":165.2598,"group":"group 1"},{"x":5.0244,"y":-28.9423,"group":"group 3"},{"x":4.2009,"y":-16.8992,"group":"group 2"},{"x":6.7986,"y":49.3177,"group":"group 2"},{"x":5.5582,"y":58.1636,"group":"group 1"},{"x":4.1149,"y":-17.8659,"group":"group 3"},{"x":5.7896,"y":33.5236,"group":"group 2"},{"x":4.1551,"y":-22.9897,"group":"group 3"},{"x":1.2953,"y":-25.9111,"group":"group 3"},{"x":6.0014,"y":64.865,"group":"group 1"},{"x":2.1402,"y":89.7869,"group":"group 3"},{"x":1.9866,"y":-46.7188,"group":"group 3"},{"x":9.8421,"y":299.6497,"group":"group 1"},{"x":7.3805,"y":14.4066,"group":"group 1"},{"x":1.0452,"y":-74.2213,"group":"group 1"},{"x":6.4649,"y":122.6892,"group":"group 1"},{"x":4.2101,"y":152.2849,"group":"group 3"},{"x":2.3027,"y":-90.0588,"group":"group 3"},{"x":8.5862,"y":206.5738,"group":"group 3"},{"x":1.9747,"y":45.8319,"group":"group 1"},{"x":0.7663,"y":-35.5538,"group":"group 2"},{"x":5.8189,"y":23.9629,"group":"group 2"},{"x":4.9584,"y":-82.9774,"group":"group 1"},{"x":3.8899,"y":82.2783,"group":"group 2"},{"x":3.1355,"y":173.0224,"group":"group 3"},{"x":9.7149,"y":342.46,"group":"group 3"},{"x":1.3446,"y":-81.7759,"group":"group 2"},{"x":5.9388,"y":53.5809,"group":"group 1"},{"x":0.1329,"y":-7.3682,"group":"group 2"},{"x":3.4847,"y":71.4929,"group":"group 2"},{"x":4.8124,"y":99.2593,"group":"group 3"},{"x":3.4366,"y":54.511,"group":"group 2"},{"x":1.5768,"y":62.0208,"group":"group 3"},{"x":6.7029,"y":90.7265,"group":"group 1"},{"x":3.1563,"y":104.3988,"group":"group 3"},{"x":2.791,"y":128.7194,"group":"group 3"},{"x":6.5777,"y":61.6303,"group":"group 1"},{"x":5.5246,"y":-31.3646,"group":"group 3"},{"x":4.9697,"y":55.042,"group":"group 1"},{"x":9.1366,"y":284.2302,"group":"group 1"},{"x":1.6035,"y":50.4501,"group":"group 3"},{"x":5.844,"y":16.7862,"group":"group 3"},{"x":5.1717,"y":122.863,"group":"group 3"},{"x":9.3783,"y":188.0858,"group":"group 1"},{"x":3.064,"y":44.8991,"group":"group 3"},{"x":7.8261,"y":196.1308,"group":"group 2"},{"x":5.2438,"y":171.4989,"group":"group 1"},{"x":9.3061,"y":306.3497,"group":"group 3"},{"x":2.8229,"y":-49.8803,"group":"group 3"},{"x":0.9921,"y":-101.971,"group":"group 3"},{"x":6.5771,"y":80.0821,"group":"group 2"},{"x":9.7197,"y":324.8264,"group":"group 1"},{"x":0.9799,"y":28.5833,"group":"group 2"},{"x":6.0908,"y":51.7025,"group":"group 2"},{"x":1.3361,"y":-16.8175,"group":"group 3"},{"x":3.2731,"y":68.3749,"group":"group 2"},{"x":2.3535,"y":8.4489,"group":"group 1"},{"x":3.2511,"y":12.9996,"group":"group 2"},{"x":6.8197,"y":127.2123,"group":"group 1"}];
    </script>
<p>Now our data is inside our page’s javascript scope and ready to be played with!</p>
</div>
<div id="drawing-pretty-pictures" class="section level2">
<h2>Drawing pretty pictures</h2>
<p>Let’s make a super simple d3 scatter plot to see this randomly generated data. All I have to do is include my desired javascript libraries, make a <code>div</code> element for my visualization to go into and then put my <code>{js}</code> block in. RMarkdown will slot the javascript into the page and we’re good to go.</p>
<p>In this example I did…</p>
<pre><code>&lt;script src=&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://d3js.org/d3.v4.min.js&quot;&gt;&lt;/script&gt;

&lt;div id = &quot;viz&quot;&gt;&lt;/div&gt; 

` ` `{js}
//code goes here
` ` `</code></pre>
</div>
<div id="did-it-work" class="section level2">
<h2>Did it work?</h2>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<div id="viz">

</div>
<script type="text/javascript">
var point_vals = d3.select("#viz")
  .append("p")
  .attr("align", "center")
  .text("Mouseover some data!");

//Get how wide our page is in pixels so we can draw our plot in it
var page_width = $("#did-it-work").width();
  
// set the dimensions and margins of the graph
var margin = 30,
    width = page_width - 2*margin,
    height = page_width*0.8 - 2*margin;
    
// Find max data values
var x_extent = d3.extent(data, d => d.x);
var y_extent = d3.extent(data, d => d.y);

// Set the scales 
var x = d3.scaleLinear()
  .domain(x_extent)
  .range([0, width]);
  
var y = d3.scaleLinear()
  .domain(y_extent)
  .range([height, 0]);

//Set up our SVG element
var svg = d3.select("#viz").append("svg")
    .attr("width", width + 2*margin)
    .attr("height", height + 2*margin)
  .append("g")
    .attr("transform",
          "translate(" + margin + "," + margin + ")");

var bounce_select = d3.transition()
    .duration(1000)
    .ease(d3.easeElastic.period(0.4));
    
// Add the scatterplot
svg.selectAll(".dots")
    .data(data)
  .enter().append("circle")
    .attr("class", "dots")
    .attr("fill", d => d.group === "group 1"? "steelblue":"orangered")
    .attr("fill-opacity", 0.3)
    .attr("r", 5)
    .attr("cx", d => x(d.x) )
    .attr("cy", d => y(d.y) )
    .on("mouseover", function(d){
       d3.selectAll(".dots").attr("r", 5) //make sure all the dots are small
       d3.select(this)
        .transition(bounce_select)
        .attr("r", 10);
      
       point_vals.text("X:" + d.x + " Y:" + d.y) //change the title of the graph to the datapoint
    });
    
// Draw the axes    
// Add the X Axis
svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

// Add the Y Axis
svg.append("g")
    .call(d3.axisLeft(y));
</script>
</div>
<div id="why-when" class="section level2">
<h2>Why/ When</h2>
<p>This is a bad example of a visualization for this scenario as something like plotly could do this in much less effort. If you’re doing something more complicated/ bespoke then this is a great resource to have.</p>
</div>
<div id="addendum" class="section level2">
<h2>Addendum</h2>
<p>If you’re interested, here’s the javascript code I included to make the above graph.</p>
<pre><code>var point_vals = d3.select(&quot;#viz&quot;).append(&quot;p&quot;).text(&quot;Mouseover some data!&quot;);

//Get how wide our page is in pixels so we can draw our plot in it
var page_width = $(&quot;#did-it-work&quot;).width();
  
// set the dimensions and margins of the graph
var margin = 20,
    width = page_width - 2*margin,
    height = page_width*0.8 - 2*margin;
    
// Find max data values
var x_extent = d3.extent(data, d =&gt; d.x);
var y_extent = d3.extent(data, d =&gt; d.y);

// Set the scales 
var x = d3.scaleLinear()
  .domain(x_extent)
  .range([0, width]);
  
var y = d3.scaleLinear()
  .domain(y_extent)
  .range([height, 0]);

//Set up our SVG element
var svg = d3.select(&quot;#viz&quot;).append(&quot;svg&quot;)
    .attr(&quot;width&quot;, width + 2*margin)
    .attr(&quot;height&quot;, height + 2*margin)
  .append(&quot;g&quot;)
    .attr(&quot;transform&quot;,
          &quot;translate(&quot; + margin + &quot;,&quot; + margin + &quot;)&quot;);

var bounce_select = d3.transition()
    .duration(1000)
    .ease(d3.easeElastic.period(0.4));
    
// Add the scatterplot
svg.selectAll(&quot;.dots&quot;)
    .data(data)
  .enter().append(&quot;circle&quot;)
    .attr(&quot;class&quot;, &quot;dots&quot;)
    .attr(&quot;fill&quot;, d =&gt; d.group === &quot;group 1&quot;? &quot;steelblue&quot;:&quot;orangered&quot;)
    .attr(&quot;fill-opacity&quot;, 0.3)
    .attr(&quot;r&quot;, 5)
    .attr(&quot;cx&quot;, d =&gt; x(d.x) )
    .attr(&quot;cy&quot;, d =&gt; y(d.y) )
    .on(&quot;mouseover&quot;, function(d){
       d3.selectAll(&quot;.dots&quot;).attr(&quot;r&quot;, 5) //make sure all the dots are small
       d3.select(this)
        .transition(bounce_select)
        .attr(&quot;r&quot;, 10);
      
       point_vals.text(&quot;X:&quot; + d.x + &quot; Y:&quot; + d.y) //change the title of the graph to the datapoint
    });
    
// Draw the axes    
// Add the X Axis
svg.append(&quot;g&quot;)
    .attr(&quot;transform&quot;, &quot;translate(0,&quot; + height + &quot;)&quot;)
    .call(d3.axisBottom(x));

// Add the Y Axis
svg.append(&quot;g&quot;)
    .call(d3.axisLeft(y));</code></pre>
</div>
</section>
<section>
  









<style>

  .author_blurb {
    display: flex;
    flex-direction: row;    
    justify-content: flex-start;
    align-items: flex-start;
    height: 150px;
    text-decoration none;
  }
  
  .author_photo {
  }
  
  .photo{
    width: 90px;
  }
  
  .author_info{
    display: flex;
    flex-direction: column;    
    padding-left: 15px;
    justify-content: center;
  }
  
  .name{
    font-family: "Merriweather", serif;
    letter-spacing: 0.01rem;
    font-size: 1.7rem;
  }
  
  .contact_info{
    align-content: center;
  }
  
  .contact_info a {
    background-repeat: no-repeat, no-repeat, no-repeat !important;
    text-decoration: none !important;
  }
  
  .bio{
    height: 100px;
    padding-top: 0px;
  }
  
  .bio_text{
    padding-top: 5px;
    margin-top: auto;
    font-size: 1.2rem;
    line-height: 1.5em;
    font-weight: 200;
    color: #636363;
    letter-spacing: 0;
    text-indent: 0;
  }
  
   
  @media all and (max-width: 800px) {
    .author_blurb {
      
    }
  }
  
   
  @media all and (max-width: 500px) {
    .author_blurb {
      flex-direction: column;    
    }
    .author_info{
      padding-top: 40px;
    }
    .author_photo {
      align-self: center;
    }
  }
  
</style>





<div class="author_blurb">
    <div class="author_photo">
      <div class="photo">
        <img style = "border-radius: 25px;" src="https://avatars0.githubusercontent.com/u/6764693?v=3&amp;u=c9c491a636605fe3d6122defb43eb367b3d9381f&amp;s=400" alt="Nick Strayer image" width="90" height="90">
      </div>
    </div>
    <div class = "author_info">
      <div class = "contact_info">
          <span class = "name"> Nick Strayer |</span>
          <a class = "social_buttons" href = http://nickstrayer.me >
              <img style="width:20px;" src = "http://image.flaticon.com/icons/png/128/12/12195.png"/>
          </a>
          <a class="social_buttons" href = https://twitter.com/NicholasStrayer>
            <img style="width:22px;" src = "https://cdn1.iconfinder.com/data/icons/logotypes/32/twitter-128.png"/>
          </a>
          <a class = "social_buttons" href = https://github.com/nstrayer >
            <img style="width:23px;" src = "https://a248.e.akamai.net/assets.github.com/images/icons/emoji/octocat.png"/>
          </a>
      </div>
      <div class = "bio">
        <p class = "bio_text">Randomly walking my way though a career in statistics</p>
      </div>
    </div>
  </div>





  


  <div id="disqus_thread"></div>
    <script type="text/javascript">
       
      var disqus_shortname = 'livefreeordichotomize'; 
      var disqus_identifier = '\/2017\/01\/24\/custom-javascript-visualizations-in-rmarkdown\/';
       
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


      
  <footer class="page-footer">
		<hr>
		<ul class="page-footer-menu">
		
		</ul>

  

	<div class="copyright">
	<p>
    
      &copy; 2017
    .
    All rights reserved.
    
  </p>
</div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</footer>



</section>
</article>
</div>
</body>
</html>
